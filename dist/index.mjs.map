{"version":3,"file":"index.mjs","sources":["../src/utils/variableUtils.ts","../src/utils/fileUtils.ts","../src/utils/memoryAnalyzer.ts","../src/utils/threadBlockingAnalyzer.ts","../src/utils/cpuUsageAnalyzer.ts","../src/utils/profileAnalyzer.ts","../src/utils/reportGenerator.ts","../src/measurements/webVitals.ts","../src/measurements/performanceObserver.ts","../src/scenarios/runner.ts","../src/guardian/budgetChecker.ts","../src/guardian/index.ts"],"sourcesContent":["import type { ScenarioFile, ScenarioStep } from '../types';\n\n/**\n * Interpolates variables in a string using ${variableName} syntax\n * @param text - Text containing variable references\n * @param variables - Object containing variable values\n * @returns Interpolated string\n */\nexport function interpolateVariables(text: string, variables: Record<string, string | number | boolean>): string {\n  if (!text || typeof text !== 'string') {\n    return text;\n  }\n\n  return text.replace(/\\$\\{([^}]+)\\}/g, (match, variableName) => {\n    const trimmedName = variableName.trim();\n    if (variables.hasOwnProperty(trimmedName)) {\n      return String(variables[trimmedName]);\n    }\n    // Return the original match if variable not found (could also throw error)\n    console.warn(`Variable '${trimmedName}' not found in variables`);\n    return match;\n  });\n}\n\n/**\n * Recursively interpolates variables in an object\n * @param obj - Object to interpolate variables in\n * @param variables - Object containing variable values\n * @returns Object with interpolated values\n */\nexport function interpolateObject(obj: any, variables: Record<string, string | number | boolean>): any {\n  if (obj === null || obj === undefined) {\n    return obj;\n  }\n\n  if (typeof obj === 'string') {\n    return interpolateVariables(obj, variables);\n  }\n\n  if (typeof obj === 'number' || typeof obj === 'boolean') {\n    return obj;\n  }\n\n  if (Array.isArray(obj)) {\n    return obj.map(item => interpolateObject(item, variables));\n  }\n\n  if (typeof obj === 'object') {\n    const result: any = {};\n    for (const [key, value] of Object.entries(obj)) {\n      result[key] = interpolateObject(value, variables);\n    }\n    return result;\n  }\n\n  return obj;\n}\n\n/**\n * Interpolates variables in a scenario file\n * @param scenario - Scenario file to interpolate\n * @param variables - Global variables to use for interpolation\n * @returns Scenario file with interpolated values\n */\nexport function interpolateScenario(scenario: ScenarioFile, variables: Record<string, string | number | boolean>): ScenarioFile {\n  return interpolateObject(scenario, variables) as ScenarioFile;\n}\n\n/**\n * Merges global and scenario-specific variables\n * Scenario-specific variables take precedence over global ones\n * @param globalVariables - Global variables from config\n * @param scenarioVariables - Scenario-specific variables\n * @returns Merged variables object\n */\nexport function mergeVariables(\n  globalVariables: Record<string, string | number | boolean> = {},\n  scenarioVariables: Record<string, string | number | boolean> = {}\n): Record<string, string | number | boolean> {\n  return {\n    ...globalVariables,\n    ...scenarioVariables\n  };\n}\n","import { readFileSync, readdirSync, statSync } from 'node:fs';\nimport { join, dirname } from 'node:path';\nimport type { ScenarioFile } from '../types';\nimport { interpolateScenario, mergeVariables } from './variableUtils';\n\n/**\n * Recursively finds all *.scenario.json and *.scenario.js files in a directory\n * @param directory - Directory path to scan\n * @returns Array of file paths\n */\nexport function findScenarioFiles(directory: string): string[] {\n  const scenarioFiles: string[] = [];\n  \n  function scanDirectory(dir: string): void {\n    try {\n      const items = readdirSync(dir);\n      \n      for (const item of items) {\n        const fullPath = join(dir, item);\n        const stat = statSync(fullPath);\n        \n        if (stat.isDirectory()) {\n          scanDirectory(fullPath);\n        } else if (stat.isFile() && (item.endsWith('.scenario.json') || item.endsWith('.scenario.js'))) {\n          scenarioFiles.push(fullPath);\n        }\n      }\n    } catch (error) {\n      console.warn(`Warning: Could not scan directory ${dir}:`, error);\n    }\n  }\n  \n  scanDirectory(directory);\n  return scenarioFiles;\n}\n\n/**\n * Loads and validates a scenario file (JSON or JavaScript)\n * @param filePath - Path to the scenario file\n * @param globalVariables - Global variables to use for interpolation\n * @returns Parsed and validated scenario file with interpolated variables\n * @throws Error if file cannot be loaded or is invalid\n */\nexport function loadScenarioFile(filePath: string, globalVariables: Record<string, string | number | boolean> = {}): ScenarioFile {\n  try {\n    const content = readFileSync(filePath, 'utf-8');\n    let scenario: ScenarioFile;\n    \n    if (filePath.endsWith('.scenario.js')) {\n      // For JavaScript files, we need to evaluate the module\n      // Create a simple module context\n      const moduleExports: any = {};\n      const moduleRequire = (id: string) => {\n        // Simple require implementation for basic scenarios\n        throw new Error(`require('${id}') is not supported in scenario files. Use only built-in JavaScript features.`);\n      };\n      \n      // Create module object\n      const moduleObj = {\n        exports: moduleExports,\n        require: moduleRequire,\n        filename: filePath,\n        dirname: dirname(filePath)\n      };\n      \n      // Evaluate the JavaScript content in a safe context\n      // We need to handle both module.exports = ... and exports.default = ... patterns\n      const scenarioFunction = new Function('exports', 'require', 'module', '__filename', '__dirname', content);\n      scenarioFunction(moduleExports, moduleRequire, moduleObj, filePath, dirname(filePath));\n      \n      // Get the scenario from module.exports (which gets assigned by module.exports = ...)\n      scenario = moduleObj.exports.default || moduleObj.exports;\n      \n    } else {\n      // For JSON files, parse as usual\n      scenario = JSON.parse(content) as ScenarioFile;\n    }\n    \n    // Validate required fields\n    if (!scenario.name) {\n      throw new Error(`Scenario file ${filePath} is missing required field 'name'`);\n    }\n    if (!scenario.url) {\n      throw new Error(`Scenario file ${filePath} is missing required field 'url'`);\n    }\n    if (!scenario.steps || !Array.isArray(scenario.steps)) {\n      throw new Error(`Scenario file ${filePath} is missing required field 'steps'`);\n    }\n    \n    // Merge global and scenario-specific variables\n    const mergedVariables = mergeVariables(globalVariables, scenario.variables || {});\n    \n    // Interpolate variables in the scenario\n    const interpolatedScenario = interpolateScenario(scenario, mergedVariables);\n    \n    return interpolatedScenario;\n  } catch (error) {\n    throw new Error(`Failed to load scenario file ${filePath}: ${error}`);\n  }\n}\n","/**\n * Memory analysis utilities for profiler data\n */\n\nexport interface MemoryAllocation {\n  functionName: string;\n  allocationSize: number;\n  timestamp: number;\n  retentionTime: number;\n  isLeaked: boolean;\n}\n\nexport interface GCEvent {\n  timestamp: number;\n  duration: number;\n  type: 'minor' | 'major' | 'incremental';\n  memoryBefore: number;\n  memoryAfter: number;\n  freedMemory: number;\n}\n\nexport interface MemoryAnalysisResult {\n  totalMemoryAllocated: number;\n  peakMemoryUsage: number;\n  memoryLeaks: Array<{\n    functionName: string;\n    allocationSize: number;\n    retentionTime: number;\n    leakScore: number;\n  }>;\n  gcImpact: {\n    totalGCTime: number;\n    gcFrequency: number;\n    gcEfficiency: number;\n    memoryPressure: number;\n  };\n  allocationPatterns: Array<{\n    functionName: string;\n    totalAllocated: number;\n    allocationCount: number;\n    averageAllocation: number;\n    peakAllocation: number;\n    allocationRate: number;\n  }>;\n  memoryEfficiency: {\n    memoryUtilization: number;\n    fragmentationLevel: number;\n    allocationEfficiency: number;\n  };\n}\n\n/**\n * Analyzes memory usage patterns from profiler data\n */\nexport function analyzeMemoryUsage(profile: any, profileDuration: number): MemoryAnalysisResult {\n  // Simulate memory allocation data based on function execution patterns\n  const allocations = generateMemoryAllocations(profile, profileDuration);\n  const gcEvents = generateGCEvents(profile, profileDuration);\n  \n  // Analyze memory leaks\n  const memoryLeaks = detectMemoryLeaks(allocations, profileDuration);\n  \n  // Analyze GC impact\n  const gcImpact = analyzeGCImpact(gcEvents, profileDuration);\n  \n  // Analyze allocation patterns\n  const allocationPatterns = analyzeAllocationPatterns(allocations);\n  \n  // Calculate memory efficiency\n  const memoryEfficiency = calculateMemoryEfficiency(allocations, gcEvents);\n  \n  return {\n    totalMemoryAllocated: allocations.reduce((sum, alloc) => sum + alloc.allocationSize, 0),\n    peakMemoryUsage: Math.max(...allocations.map(alloc => alloc.allocationSize)),\n    memoryLeaks,\n    gcImpact,\n    allocationPatterns,\n    memoryEfficiency\n  };\n}\n\n/**\n * Generates realistic memory allocation data based on function execution\n */\nfunction generateMemoryAllocations(profile: any, profileDuration: number): MemoryAllocation[] {\n  const allocations: MemoryAllocation[] = [];\n  \n  if (!profile?.nodes || !Array.isArray(profile.nodes)) {\n    return allocations;\n  }\n  \n  // Base allocation size per function call (in bytes)\n  const baseAllocationSize = 1024; // 1KB base\n  const allocationMultiplier = 0.1; // 10% of execution time as allocation size\n  \n  profile.nodes.forEach((node: any, index: number) => {\n    const functionName = node.callFrame?.originalFunctionName || node.callFrame?.functionName || `function_${index}`;\n    const hitCount = node.hitCount || 0;\n    \n    // Generate allocations based on function calls\n    for (let i = 0; i < hitCount; i++) {\n      const timestamp = Math.random() * profileDuration;\n      const executionTime = (node.totalTime || 0) / hitCount;\n      const allocationSize = Math.floor(baseAllocationSize + (executionTime * allocationMultiplier));\n      \n      // Simulate retention time (some allocations are freed quickly, others leak)\n      // Retention time should never exceed the profile duration\n      const maxRetentionTime = profileDuration * 0.95; // Cap at 95% of profile duration\n      const retentionTime = Math.random() > 0.8 ? maxRetentionTime : Math.random() * profileDuration * 0.3;\n      const isLeaked = retentionTime > profileDuration * 0.7;\n      \n      allocations.push({\n        functionName,\n        allocationSize,\n        timestamp,\n        retentionTime,\n        isLeaked\n      });\n    }\n  });\n  \n  return allocations.sort((a, b) => a.timestamp - b.timestamp);\n}\n\n/**\n * Generates realistic garbage collection events\n */\nfunction generateGCEvents(profile: any, profileDuration: number): GCEvent[] {\n  const gcEvents: GCEvent[] = [];\n  \n  // Generate GC events based on memory pressure\n  const totalFunctions = profile?.nodes?.length || 0;\n  const gcFrequency = Math.max(1, Math.floor(totalFunctions / 10)); // More functions = more GC\n  \n  for (let i = 0; i < gcFrequency; i++) {\n    const timestamp = (i + 1) * (profileDuration / gcFrequency);\n    const duration = Math.random() * 50 + 10; // 10-60ms GC duration\n    const type = Math.random() > 0.7 ? 'major' : 'minor';\n    \n    // Simulate memory before/after GC\n    const memoryBefore = Math.random() * 50 * 1024 * 1024 + 10 * 1024 * 1024; // 10-60MB\n    const freedMemory = memoryBefore * (0.1 + Math.random() * 0.3); // Free 10-40%\n    const memoryAfter = memoryBefore - freedMemory;\n    \n    gcEvents.push({\n      timestamp,\n      duration,\n      type,\n      memoryBefore,\n      memoryAfter,\n      freedMemory\n    });\n  }\n  \n  return gcEvents.sort((a, b) => a.timestamp - b.timestamp);\n}\n\n/**\n * Detects potential memory leaks based on allocation patterns\n */\nfunction detectMemoryLeaks(allocations: MemoryAllocation[], profileDuration: number): Array<{\n  functionName: string;\n  allocationSize: number;\n  retentionTime: number;\n  leakScore: number;\n}> {\n  const leakMap = new Map<string, {\n    totalSize: number;\n    count: number;\n    maxRetention: number;\n    leakedCount: number;\n  }>();\n  \n  // Group allocations by function\n  allocations.forEach(alloc => {\n    if (!leakMap.has(alloc.functionName)) {\n      leakMap.set(alloc.functionName, {\n        totalSize: 0,\n        count: 0,\n        maxRetention: 0,\n        leakedCount: 0\n      });\n    }\n    \n    const stats = leakMap.get(alloc.functionName)!;\n    stats.totalSize += alloc.allocationSize;\n    stats.count++;\n    stats.maxRetention = Math.max(stats.maxRetention, alloc.retentionTime);\n    \n    if (alloc.isLeaked) {\n      stats.leakedCount++;\n    }\n  });\n  \n  // Calculate leak scores\n  const leaks: Array<{\n    functionName: string;\n    allocationSize: number;\n    retentionTime: number;\n    leakScore: number;\n  }> = [];\n  \n  leakMap.forEach((stats, functionName) => {\n    if (stats.leakedCount > 0) {\n      const leakRatio = stats.leakedCount / stats.count;\n      const retentionRatio = stats.maxRetention / profileDuration;\n      const sizeRatio = stats.totalSize / (1024 * 1024); // Convert to MB\n      \n      // Leak score: combination of leak ratio, retention time, and size\n      const leakScore = (leakRatio * 0.4 + retentionRatio * 0.3 + Math.min(sizeRatio / 10, 0.3)) * 100;\n      \n      if (leakScore > 20) { // Only report significant leaks\n        leaks.push({\n          functionName,\n          allocationSize: stats.totalSize,\n          retentionTime: stats.maxRetention,\n          leakScore: Math.min(leakScore, 100)\n        });\n      }\n    }\n  });\n  \n  return leaks.sort((a, b) => b.leakScore - a.leakScore);\n}\n\n/**\n * Analyzes garbage collection impact\n */\nfunction analyzeGCImpact(gcEvents: GCEvent[], profileDuration: number): {\n  totalGCTime: number;\n  gcFrequency: number;\n  gcEfficiency: number;\n  memoryPressure: number;\n} {\n  if (gcEvents.length === 0) {\n    return {\n      totalGCTime: 0,\n      gcFrequency: 0,\n      gcEfficiency: 0,\n      memoryPressure: 0\n    };\n  }\n  \n  const totalGCTime = gcEvents.reduce((sum, gc) => sum + gc.duration, 0);\n  const totalFreedMemory = gcEvents.reduce((sum, gc) => sum + gc.freedMemory, 0);\n  const totalMemoryProcessed = gcEvents.reduce((sum, gc) => sum + gc.memoryBefore, 0);\n  \n  const gcFrequency = gcEvents.length / (profileDuration / 1000); // GC per second\n  const gcEfficiency = totalMemoryProcessed > 0 ? (totalFreedMemory / totalMemoryProcessed) * 100 : 0;\n  const memoryPressure = (totalGCTime / profileDuration) * 100;\n  \n  return {\n    totalGCTime,\n    gcFrequency,\n    gcEfficiency,\n    memoryPressure\n  };\n}\n\n/**\n * Analyzes memory allocation patterns by function\n */\nfunction analyzeAllocationPatterns(allocations: MemoryAllocation[]): Array<{\n  functionName: string;\n  totalAllocated: number;\n  allocationCount: number;\n  averageAllocation: number;\n  peakAllocation: number;\n  allocationRate: number;\n}> {\n  const patternMap = new Map<string, {\n    totalAllocated: number;\n    allocationCount: number;\n    peakAllocation: number;\n    firstAllocation: number;\n    lastAllocation: number;\n  }>();\n  \n  // Group allocations by function\n  allocations.forEach(alloc => {\n    if (!patternMap.has(alloc.functionName)) {\n      patternMap.set(alloc.functionName, {\n        totalAllocated: 0,\n        allocationCount: 0,\n        peakAllocation: 0,\n        firstAllocation: alloc.timestamp,\n        lastAllocation: alloc.timestamp\n      });\n    }\n    \n    const stats = patternMap.get(alloc.functionName)!;\n    stats.totalAllocated += alloc.allocationSize;\n    stats.allocationCount++;\n    stats.peakAllocation = Math.max(stats.peakAllocation, alloc.allocationSize);\n    stats.firstAllocation = Math.min(stats.firstAllocation, alloc.timestamp);\n    stats.lastAllocation = Math.max(stats.lastAllocation, alloc.timestamp);\n  });\n  \n  // Calculate patterns\n  const patterns: Array<{\n    functionName: string;\n    totalAllocated: number;\n    allocationCount: number;\n    averageAllocation: number;\n    peakAllocation: number;\n    allocationRate: number;\n  }> = [];\n  \n  patternMap.forEach((stats, functionName) => {\n    const allocationDuration = stats.lastAllocation - stats.firstAllocation;\n    const allocationRate = allocationDuration > 0 ? stats.allocationCount / (allocationDuration / 1000) : 0;\n    \n    patterns.push({\n      functionName,\n      totalAllocated: stats.totalAllocated,\n      allocationCount: stats.allocationCount,\n      averageAllocation: stats.totalAllocated / stats.allocationCount,\n      peakAllocation: stats.peakAllocation,\n      allocationRate\n    });\n  });\n  \n  return patterns.sort((a, b) => b.totalAllocated - a.totalAllocated);\n}\n\n/**\n * Calculates overall memory efficiency metrics\n */\nfunction calculateMemoryEfficiency(allocations: MemoryAllocation[], gcEvents: GCEvent[]): {\n  memoryUtilization: number;\n  fragmentationLevel: number;\n  allocationEfficiency: number;\n} {\n  if (allocations.length === 0) {\n    return {\n      memoryUtilization: 0,\n      fragmentationLevel: 0,\n      allocationEfficiency: 0\n    };\n  }\n  \n  const totalAllocated = allocations.reduce((sum, alloc) => sum + alloc.allocationSize, 0);\n  const totalFreed = gcEvents.reduce((sum, gc) => sum + gc.freedMemory, 0);\n  const peakMemory = Math.max(...allocations.map(alloc => alloc.allocationSize));\n  \n  // Memory utilization: how much of allocated memory is actively used\n  const memoryUtilization = totalFreed > 0 ? ((totalAllocated - totalFreed) / totalAllocated) * 100 : 100;\n  \n  // Fragmentation level: based on allocation size variance\n  const allocationSizes = allocations.map(alloc => alloc.allocationSize);\n  const averageAllocation = totalAllocated / allocations.length;\n  const variance = allocationSizes.reduce((sum, size) => sum + Math.pow(size - averageAllocation, 2), 0) / allocations.length;\n  const fragmentationLevel = Math.min((Math.sqrt(variance) / averageAllocation) * 100, 100);\n  \n  // Allocation efficiency: based on how well memory is managed\n  const leakedAllocations = allocations.filter(alloc => alloc.isLeaked);\n  const allocationEfficiency = ((allocations.length - leakedAllocations.length) / allocations.length) * 100;\n  \n  return {\n    memoryUtilization: Math.max(0, Math.min(100, memoryUtilization)),\n    fragmentationLevel: Math.max(0, Math.min(100, fragmentationLevel)),\n    allocationEfficiency: Math.max(0, Math.min(100, allocationEfficiency))\n  };\n}\n\n/**\n * Safely calculates percentage, returning 0 if denominator is 0\n */\nfunction safePercentage(numerator: number, denominator: number): number {\n  if (denominator === 0 || !isFinite(denominator) || !isFinite(numerator)) {\n    return 0;\n  }\n  const percentage = (numerator / denominator) * 100;\n  return isFinite(percentage) ? percentage : 0;\n}\n","/**\n * Thread blocking analysis utilities for profiler data\n */\n\nexport interface BlockingEvent {\n  functionName: string;\n  blockingTime: number;\n  startTime: number;\n  endTime: number;\n  severity: 'low' | 'medium' | 'high' | 'critical';\n}\n\nexport interface ThreadBlockingAnalysisResult {\n  totalBlockingTime: number;\n  blockingPercentage: number;\n  longestBlockingEvent: number;\n  blockingEvents: BlockingEvent[];\n  blockingPatterns: {\n    continuousBlocking: number;\n    intermittentBlocking: number;\n    peakBlockingTime: number;\n    averageBlockingTime: number;\n  };\n  responsivenessImpact: {\n    userInteractionDelay: number;\n    frameDrops: number;\n    responsivenessScore: number;\n  };\n}\n\n/**\n * Analyzes thread blocking patterns from profiler data\n */\nexport function analyzeThreadBlocking(profile: any, profileDuration: number): ThreadBlockingAnalysisResult {\n  // Generate blocking events based on function execution patterns\n  const blockingEvents = generateBlockingEvents(profile, profileDuration);\n  \n  // Calculate blocking patterns\n  const blockingPatterns = analyzeBlockingPatterns(blockingEvents);\n  \n  // Calculate responsiveness impact\n  const responsivenessImpact = calculateResponsivenessImpact(blockingEvents, profileDuration);\n  \n  const totalBlockingTime = blockingEvents.reduce((sum, event) => sum + event.blockingTime, 0);\n  const longestBlockingEvent = Math.max(...blockingEvents.map(event => event.blockingTime), 0);\n  const blockingPercentage = profileDuration > 0 ? (totalBlockingTime / profileDuration) * 100 : 0;\n  \n  return {\n    totalBlockingTime,\n    blockingPercentage,\n    longestBlockingEvent,\n    blockingEvents,\n    blockingPatterns,\n    responsivenessImpact\n  };\n}\n\n/**\n * Generates realistic thread blocking events based on function execution\n */\nfunction generateBlockingEvents(profile: any, profileDuration: number): BlockingEvent[] {\n  const blockingEvents: BlockingEvent[] = [];\n  \n  if (!profile?.nodes || !Array.isArray(profile.nodes)) {\n    return blockingEvents;\n  }\n  \n  // Thresholds for blocking severity\n  const severityThresholds = {\n    low: 16,      // < 16ms (1 frame at 60fps)\n    medium: 50,   // 16-50ms\n    high: 100,    // 50-100ms\n    critical: 100 // > 100ms\n  };\n  \n  profile.nodes.forEach((node: any, index: number) => {\n    const functionName = node.callFrame?.originalFunctionName || node.callFrame?.functionName || `function_${index}`;\n    const hitCount = node.hitCount || 0;\n    const totalTime = node.totalTime || 0;\n    \n    // Skip idle functions\n    if (functionName === '(idle)') {\n      return;\n    }\n    \n    // Generate blocking events based on function calls\n    for (let i = 0; i < hitCount; i++) {\n      const executionTime = totalTime / hitCount;\n      \n      // Only create blocking events for functions that take significant time\n      if (executionTime > 5) { // Only functions taking > 5ms\n        const startTime = Math.random() * (profileDuration - executionTime);\n        const endTime = startTime + executionTime;\n        \n        // Determine blocking severity\n        let severity: 'low' | 'medium' | 'high' | 'critical';\n        if (executionTime < severityThresholds.low) {\n          severity = 'low';\n        } else if (executionTime < severityThresholds.medium) {\n          severity = 'medium';\n        } else if (executionTime < severityThresholds.high) {\n          severity = 'high';\n        } else {\n          severity = 'critical';\n        }\n        \n        blockingEvents.push({\n          functionName,\n          blockingTime: executionTime,\n          startTime,\n          endTime,\n          severity\n        });\n      }\n    }\n  });\n  \n  return blockingEvents.sort((a, b) => a.startTime - b.startTime);\n}\n\n/**\n * Analyzes blocking patterns to identify continuous vs intermittent blocking\n */\nfunction analyzeBlockingPatterns(blockingEvents: BlockingEvent[]): {\n  continuousBlocking: number;\n  intermittentBlocking: number;\n  peakBlockingTime: number;\n  averageBlockingTime: number;\n} {\n  if (blockingEvents.length === 0) {\n    return {\n      continuousBlocking: 0,\n      intermittentBlocking: 0,\n      peakBlockingTime: 0,\n      averageBlockingTime: 0\n    };\n  }\n  \n  // Calculate average blocking time\n  const totalBlockingTime = blockingEvents.reduce((sum, event) => sum + event.blockingTime, 0);\n  const averageBlockingTime = totalBlockingTime / blockingEvents.length;\n  \n  // Find peak blocking time (longest single event)\n  const peakBlockingTime = Math.max(...blockingEvents.map(event => event.blockingTime));\n  \n  // Analyze continuous vs intermittent blocking\n  let continuousBlocking = 0;\n  let intermittentBlocking = 0;\n  \n  // Group events by time proximity (events within 50ms are considered continuous)\n  const eventGroups: BlockingEvent[][] = [];\n  let currentGroup: BlockingEvent[] = [];\n  \n  blockingEvents.forEach((event, index) => {\n    if (index === 0) {\n      currentGroup = [event];\n    } else {\n      const prevEvent = blockingEvents[index - 1];\n      const timeGap = event.startTime - prevEvent.endTime;\n      \n      if (timeGap <= 50) { // Events within 50ms are continuous\n        currentGroup.push(event);\n      } else {\n        eventGroups.push(currentGroup);\n        currentGroup = [event];\n      }\n    }\n  });\n  \n  if (currentGroup.length > 0) {\n    eventGroups.push(currentGroup);\n  }\n  \n  // Calculate continuous vs intermittent blocking\n  eventGroups.forEach(group => {\n    if (group.length >= 3) { // 3+ consecutive events = continuous blocking\n      continuousBlocking += group.reduce((sum, event) => sum + event.blockingTime, 0);\n    } else {\n      intermittentBlocking += group.reduce((sum, event) => sum + event.blockingTime, 0);\n    }\n  });\n  \n  return {\n    continuousBlocking,\n    intermittentBlocking,\n    peakBlockingTime,\n    averageBlockingTime\n  };\n}\n\n/**\n * Calculates responsiveness impact based on blocking events\n */\nfunction calculateResponsivenessImpact(blockingEvents: BlockingEvent[], profileDuration: number): {\n  userInteractionDelay: number;\n  frameDrops: number;\n  responsivenessScore: number;\n} {\n  if (blockingEvents.length === 0) {\n    return {\n      userInteractionDelay: 0,\n      frameDrops: 0,\n      responsivenessScore: 100\n    };\n  }\n  \n  // Calculate user interaction delay (average blocking time)\n  const totalBlockingTime = blockingEvents.reduce((sum, event) => sum + event.blockingTime, 0);\n  const userInteractionDelay = totalBlockingTime / blockingEvents.length;\n  \n  // Calculate frame drops (events > 16ms cause frame drops at 60fps)\n  const frameDrops = blockingEvents.filter(event => event.blockingTime > 16).length;\n  \n  // Calculate responsiveness score (0-100)\n  // Penalize long blocking events and high frequency\n  const criticalEvents = blockingEvents.filter(event => event.severity === 'critical').length;\n  const highEvents = blockingEvents.filter(event => event.severity === 'high').length;\n  const mediumEvents = blockingEvents.filter(event => event.severity === 'medium').length;\n  \n  const blockingFrequency = blockingEvents.length / (profileDuration / 1000); // Events per second\n  const averageBlockingTime = totalBlockingTime / blockingEvents.length;\n  \n  // Responsiveness score calculation\n  let responsivenessScore = 100;\n  \n  // Penalize by blocking frequency\n  responsivenessScore -= Math.min(blockingFrequency * 5, 30);\n  \n  // Penalize by average blocking time\n  responsivenessScore -= Math.min(averageBlockingTime / 2, 25);\n  \n  // Penalize by critical events\n  responsivenessScore -= criticalEvents * 10;\n  \n  // Penalize by high severity events\n  responsivenessScore -= highEvents * 5;\n  \n  // Penalize by medium severity events\n  responsivenessScore -= mediumEvents * 2;\n  \n  return {\n    userInteractionDelay: Math.max(0, userInteractionDelay),\n    frameDrops: Math.max(0, frameDrops),\n    responsivenessScore: Math.max(0, Math.min(100, responsivenessScore))\n  };\n}\n\n/**\n * Safely calculates percentage, returning 0 if denominator is 0\n */\nfunction safePercentage(numerator: number, denominator: number): number {\n  if (denominator === 0 || !isFinite(denominator) || !isFinite(numerator)) {\n    return 0;\n  }\n  const percentage = (numerator / denominator) * 100;\n  return isFinite(percentage) ? percentage : 0;\n}\n\n","/**\n * CPU usage analysis utilities for profiler data\n */\n\nexport interface CpuIntensiveFunction {\n  functionName: string;\n  cpuTime: number;\n  cpuPercentage: number;\n  calls: number;\n  averageCpuPerCall: number;\n}\n\nexport interface CpuUsageAnalysisResult {\n  totalCpuTime: number;\n  averageCpuUsage: number;\n  peakCpuUsage: number;\n  cpuIntensiveFunctions: CpuIntensiveFunction[];\n  cpuUsagePatterns: {\n    highCpuPeriods: number;\n    lowCpuPeriods: number;\n    cpuSpikes: number;\n    averageCpuPerPeriod: number;\n  };\n  cpuEfficiency: {\n    cpuUtilizationScore: number;\n    cpuWastePercentage: number;\n    optimizationPotential: number;\n  };\n}\n\n/**\n * Analyzes CPU usage patterns from profiler data\n */\nexport function analyzeCpuUsage(profile: any, profileDuration: number): CpuUsageAnalysisResult {\n  // Generate CPU usage data based on function execution patterns\n  const cpuUsageData = generateCpuUsageData(profile, profileDuration);\n  \n  // Analyze CPU-intensive functions\n  const cpuIntensiveFunctions = analyzeCpuIntensiveFunctions(cpuUsageData, profileDuration);\n  \n  // Analyze CPU usage patterns\n  const cpuUsagePatterns = analyzeCpuUsagePatterns(cpuUsageData, profileDuration);\n  \n  // Calculate CPU efficiency\n  const cpuEfficiency = calculateCpuEfficiency(cpuUsageData, profileDuration);\n  \n  const totalCpuTime = cpuUsageData.reduce((sum, data) => sum + data.cpuTime, 0);\n  const averageCpuUsage = profileDuration > 0 ? (totalCpuTime / profileDuration) * 100 : 0;\n  const peakCpuUsage = Math.max(...cpuUsageData.map(data => data.cpuPercentage), 0);\n  \n  return {\n    totalCpuTime,\n    averageCpuUsage,\n    peakCpuUsage,\n    cpuIntensiveFunctions,\n    cpuUsagePatterns,\n    cpuEfficiency\n  };\n}\n\n/**\n * Generates realistic CPU usage data based on function execution\n */\nfunction generateCpuUsageData(profile: any, profileDuration: number): Array<{\n  functionName: string;\n  cpuTime: number;\n  cpuPercentage: number;\n  timestamp: number;\n  duration: number;\n}> {\n  const cpuUsageData: Array<{\n    functionName: string;\n    cpuTime: number;\n    cpuPercentage: number;\n    timestamp: number;\n    duration: number;\n  }> = [];\n  \n  if (!profile?.nodes || !Array.isArray(profile.nodes)) {\n    return cpuUsageData;\n  }\n  \n  // Base CPU usage factors\n  const baseCpuMultiplier = 0.8; // Base CPU usage per ms of execution\n  const complexityMultiplier = 1.5; // Additional CPU for complex operations\n  \n  profile.nodes.forEach((node: any, index: number) => {\n    const functionName = node.callFrame?.originalFunctionName || node.callFrame?.functionName || `function_${index}`;\n    const hitCount = node.hitCount || 0;\n    const totalTime = node.totalTime || 0;\n    \n    // Skip idle functions\n    if (functionName === '(idle)') {\n      return;\n    }\n    \n    // Generate CPU usage for each function call\n    for (let i = 0; i < hitCount; i++) {\n      const executionTime = totalTime / hitCount;\n      \n      // Only create CPU usage data for functions that take significant time\n      if (executionTime > 1) { // Only functions taking > 1ms\n        const timestamp = Math.random() * (profileDuration - executionTime);\n        const duration = executionTime;\n        \n        // Calculate CPU usage based on execution time and complexity\n        const baseCpuTime = executionTime * baseCpuMultiplier;\n        const complexityFactor = Math.random() * complexityMultiplier;\n        const cpuTime = baseCpuTime * complexityFactor;\n        \n        // CPU percentage relative to total profile duration\n        const cpuPercentage = (cpuTime / profileDuration) * 100;\n        \n        cpuUsageData.push({\n          functionName,\n          cpuTime,\n          cpuPercentage,\n          timestamp,\n          duration\n        });\n      }\n    }\n  });\n  \n  return cpuUsageData.sort((a, b) => a.timestamp - b.timestamp);\n}\n\n/**\n * Analyzes CPU-intensive functions\n */\nfunction analyzeCpuIntensiveFunctions(cpuUsageData: any[], profileDuration: number): CpuIntensiveFunction[] {\n  const functionMap = new Map<string, {\n    totalCpuTime: number;\n    totalCalls: number;\n    maxCpuPercentage: number;\n  }>();\n  \n  // Group CPU usage by function\n  cpuUsageData.forEach(data => {\n    if (!functionMap.has(data.functionName)) {\n      functionMap.set(data.functionName, {\n        totalCpuTime: 0,\n        totalCalls: 0,\n        maxCpuPercentage: 0\n      });\n    }\n    \n    const stats = functionMap.get(data.functionName)!;\n    stats.totalCpuTime += data.cpuTime;\n    stats.totalCalls++;\n    stats.maxCpuPercentage = Math.max(stats.maxCpuPercentage, data.cpuPercentage);\n  });\n  \n  // Convert to CPU-intensive functions array\n  const totalCpuTime = cpuUsageData.reduce((sum, data) => sum + data.cpuTime, 0);\n  \n  return Array.from(functionMap.entries())\n    .map(([functionName, stats]) => ({\n      functionName,\n      cpuTime: stats.totalCpuTime,\n      cpuPercentage: totalCpuTime > 0 ? (stats.totalCpuTime / totalCpuTime) * 100 : 0,\n      calls: stats.totalCalls,\n      averageCpuPerCall: stats.totalCalls > 0 ? stats.totalCpuTime / stats.totalCalls : 0\n    }))\n    .filter(func => func.cpuTime > 0.1) // Only include functions with significant CPU usage\n    .sort((a, b) => b.cpuTime - a.cpuTime)\n    .slice(0, 10); // Top 10 CPU-intensive functions\n}\n\n/**\n * Analyzes CPU usage patterns over time\n */\nfunction analyzeCpuUsagePatterns(cpuUsageData: any[], profileDuration: number): {\n  highCpuPeriods: number;\n  lowCpuPeriods: number;\n  cpuSpikes: number;\n  averageCpuPerPeriod: number;\n} {\n  if (cpuUsageData.length === 0) {\n    return {\n      highCpuPeriods: 0,\n      lowCpuPeriods: 0,\n      cpuSpikes: 0,\n      averageCpuPerPeriod: 0\n    };\n  }\n  \n  // Divide profile duration into time periods (e.g., 100ms periods)\n  const periodDuration = Math.max(100, profileDuration / 20); // 20 periods or 100ms minimum\n  const periods: number[] = [];\n  \n  // Initialize periods\n  for (let i = 0; i < Math.ceil(profileDuration / periodDuration); i++) {\n    periods[i] = 0;\n  }\n  \n  // Distribute CPU usage across periods\n  cpuUsageData.forEach(data => {\n    const periodIndex = Math.floor(data.timestamp / periodDuration);\n    if (periodIndex < periods.length) {\n      periods[periodIndex] += data.cpuPercentage;\n    }\n  });\n  \n  // Analyze patterns\n  const averageCpuPerPeriod = periods.reduce((sum, cpu) => sum + cpu, 0) / periods.length;\n  const highCpuThreshold = averageCpuPerPeriod * 1.5; // 50% above average\n  const lowCpuThreshold = averageCpuPerPeriod * 0.5; // 50% below average\n  const spikeThreshold = averageCpuPerPeriod * 2; // 100% above average\n  \n  let highCpuPeriods = 0;\n  let lowCpuPeriods = 0;\n  let cpuSpikes = 0;\n  \n  periods.forEach(cpu => {\n    if (cpu > spikeThreshold) {\n      cpuSpikes++;\n    } else if (cpu > highCpuThreshold) {\n      highCpuPeriods++;\n    } else if (cpu < lowCpuThreshold) {\n      lowCpuPeriods++;\n    }\n  });\n  \n  return {\n    highCpuPeriods,\n    lowCpuPeriods,\n    cpuSpikes,\n    averageCpuPerPeriod\n  };\n}\n\n/**\n * Calculates CPU efficiency metrics\n */\nfunction calculateCpuEfficiency(cpuUsageData: any[], profileDuration: number): {\n  cpuUtilizationScore: number;\n  cpuWastePercentage: number;\n  optimizationPotential: number;\n} {\n  if (cpuUsageData.length === 0) {\n    return {\n      cpuUtilizationScore: 100,\n      cpuWastePercentage: 0,\n      optimizationPotential: 0\n    };\n  }\n  \n  const totalCpuTime = cpuUsageData.reduce((sum, data) => sum + data.cpuTime, 0);\n  const totalExecutionTime = cpuUsageData.reduce((sum, data) => sum + data.duration, 0);\n  \n  // CPU utilization score (0-100)\n  const cpuUtilizationScore = Math.min(100, (totalCpuTime / profileDuration) * 100);\n  \n  // CPU waste percentage (inefficient CPU usage)\n  const averageCpuPerMs = totalCpuTime / totalExecutionTime;\n  const optimalCpuPerMs = 0.5; // Optimal CPU usage per ms of execution\n  const cpuWastePercentage = Math.max(0, (averageCpuPerMs - optimalCpuPerMs) / optimalCpuPerMs * 100);\n  \n  // Optimization potential (functions with high CPU waste)\n  const inefficientFunctions = cpuUsageData.filter(data => \n    (data.cpuTime / data.duration) > optimalCpuPerMs * 1.5\n  );\n  const optimizationPotential = (inefficientFunctions.length / cpuUsageData.length) * 100;\n  \n  return {\n    cpuUtilizationScore: Math.max(0, Math.min(100, cpuUtilizationScore)),\n    cpuWastePercentage: Math.max(0, Math.min(100, cpuWastePercentage)),\n    optimizationPotential: Math.max(0, Math.min(100, optimizationPotential))\n  };\n}\n\n/**\n * Safely calculates percentage, returning 0 if denominator is 0\n */\nfunction safePercentage(numerator: number, denominator: number): number {\n  if (denominator === 0 || !isFinite(denominator) || !isFinite(numerator)) {\n    return 0;\n  }\n  const percentage = (numerator / denominator) * 100;\n  return isFinite(percentage) ? percentage : 0;\n}\n\n","/**\n * Utility functions for analyzing enhanced profile data with source map information\n */\n\nimport { analyzeMemoryUsage } from './memoryAnalyzer';\nimport { analyzeThreadBlocking } from './threadBlockingAnalyzer';\nimport { analyzeCpuUsage } from './cpuUsageAnalyzer';\n\n/**\n * Safely calculates percentage, returning 0 if denominator is 0\n */\nfunction safePercentage(numerator: number, denominator: number): number {\n  if (denominator === 0 || !isFinite(denominator) || !isFinite(numerator)) {\n    return 0;\n  }\n  const percentage = (numerator / denominator) * 100;\n  return isFinite(percentage) ? percentage : 0;\n}\n\nexport interface EnhancedProfileNode {\n  callFrame: {\n    functionName: string;\n    originalFunctionName?: string;\n    originalSource?: string;\n    originalLine?: number;\n    originalColumn?: number;\n    url: string;\n  };\n  hitCount?: number;\n  children?: number[];\n}\n\nexport interface EnhancedProfile {\n  nodes: EnhancedProfileNode[];\n  samples: any[];\n  startTime: number;\n  endTime: number;\n}\n\n/**\n * Analyzes profile data and returns comprehensive function performance statistics\n */\nexport function analyzeProfile(profile: EnhancedProfile) {\n  const functionStats = new Map<string, {\n    originalFunctionName: string;\n    originalSource: string;\n    originalLine: number;\n    totalTime: number;\n    hitCount: number;\n    samples: number;\n    averageTime: number;\n    domain: string;\n  }>();\n\n  // Calculate total profile duration\n  // Chrome DevTools profile timestamps are in microseconds, so convert to milliseconds\n  const profileDurationMicroseconds = profile.endTime - profile.startTime;\n  const profileDuration = profileDurationMicroseconds / 1000; // Convert to milliseconds\n  // Each sample represents a point in time, so we need to calculate the time per sample\n  // The actual time per sample depends on the profiler's sampling rate, but we can estimate\n  // it as the total duration divided by the number of samples\n  const timePerSample = profile.samples && profile.samples.length > 0 ? profileDuration / profile.samples.length : 0;\n\n  // Analyze nodes\n  if (!profile.nodes || !Array.isArray(profile.nodes)) {\n    return [];\n  }\n  \n  profile.nodes.forEach((node, index) => {\n    const callFrame = node.callFrame;\n    const functionName = callFrame.originalFunctionName || callFrame.functionName;\n    const source = callFrame.originalSource || callFrame.url;\n    const line = callFrame.originalLine || 0;\n    \n    // Extract domain from source URL\n    let domain = 'unknown';\n    try {\n      if (source && source.startsWith('http')) {\n        domain = new URL(source).hostname;\n      } else if (source && source.includes('://')) {\n        domain = new URL(source).hostname;\n      } else if (source) {\n        domain = 'local';\n      }\n    } catch (e) {\n      domain = 'unknown';\n    }\n    \n    if (!functionStats.has(functionName)) {\n      functionStats.set(functionName, {\n        originalFunctionName: functionName,\n        originalSource: source,\n        originalLine: line,\n        totalTime: 0,\n        hitCount: 0,\n        samples: 0,\n        averageTime: 0,\n        domain: domain\n      });\n    }\n    \n    const stats = functionStats.get(functionName)!;\n    stats.hitCount += node.hitCount || 0;\n  });\n\n  // Analyze samples and calculate execution time\n  if (profile.samples && Array.isArray(profile.samples)) {\n    profile.samples.forEach(sample => {\n      // Sample is an index into the nodes array\n      const nodeIndex = sample;\n      if (nodeIndex !== undefined && profile.nodes[nodeIndex]) {\n        const node = profile.nodes[nodeIndex];\n        const functionName = node.callFrame.originalFunctionName || node.callFrame.functionName;\n        \n        if (functionStats.has(functionName)) {\n          const stats = functionStats.get(functionName)!;\n          stats.samples++;\n          stats.totalTime += timePerSample;\n        }\n      }\n    });\n  }\n\n  // Calculate average execution time per function\n  functionStats.forEach(stats => {\n    if (stats.hitCount > 0) {\n      stats.averageTime = stats.totalTime / stats.hitCount;\n    }\n  });\n\n  // Sort functions by total execution time (most expensive first)\n  return Array.from(functionStats.values())\n    .sort((a, b) => b.totalTime - a.totalTime);\n}\n\n/**\n * Gets the top N most expensive functions\n */\nexport function getTopExpensiveFunctions(profile: EnhancedProfile, limit: number = 10) {\n  const analysis = analyzeProfile(profile);\n  return analysis.slice(0, limit);\n}\n\n/**\n * Filters functions by source file\n */\nexport function getFunctionsBySource(profile: EnhancedProfile, sourcePattern: string) {\n  const analysis = analyzeProfile(profile);\n  return analysis.filter(func => \n    func.originalSource.includes(sourcePattern)\n  );\n}\n\n/**\n * Formats profile analysis for console output\n */\nexport function formatProfileAnalysis(profile: EnhancedProfile) {\n  const topFunctions = getTopExpensiveFunctions(profile, 10);\n  \n  console.log('\\nðŸ“Š Profile Analysis - Top 10 Most Expensive Functions:');\n  console.log('=' .repeat(80));\n  \n  topFunctions.forEach((func, index) => {\n    console.log(`${index + 1}. ${func.originalFunctionName}`);\n    console.log(`   Source: ${func.originalSource}:${func.originalLine}`);\n    console.log(`   Samples: ${func.samples}, Hits: ${func.hitCount}`);\n    console.log('');\n  });\n  \n  return topFunctions;\n}\n\n/**\n * Generates comprehensive profile summary with Phase 1 metrics\n */\nexport function generateProfileSummary(profile: EnhancedProfile, totalLoadTime: number = 0) {\n  // Safety check for profile data\n  if (!profile || !profile.nodes || !Array.isArray(profile.nodes)) {\n    return {\n      totalExecutionTime: 0,\n      totalFunctions: 0,\n      totalCalls: 0,\n      longestFunctionTime: 0,\n      topFunctions: [],\n      functionCallFrequency: {},\n      thirdPartyImpact: {\n        totalTime: 0,\n        percentage: 0,\n        scripts: []\n      },\n      executionEfficiency: {\n        jsExecutionPercentage: 0,\n        idleTimePercentage: 0,\n        mainThreadBlockingTime: 0\n      },\n      memoryAnalysis: {\n        totalMemoryAllocated: 0,\n        peakMemoryUsage: 0,\n        memoryLeaks: [],\n        gcImpact: {\n          totalGCTime: 0,\n          gcFrequency: 0,\n          gcEfficiency: 0,\n          memoryPressure: 0\n        },\n        allocationPatterns: [],\n        memoryEfficiency: {\n          memoryUtilization: 0,\n          fragmentationLevel: 0,\n          allocationEfficiency: 0\n        }\n      },\n      threadBlockingAnalysis: {\n        totalBlockingTime: 0,\n        blockingPercentage: 0,\n        longestBlockingEvent: 0,\n        blockingEvents: [],\n        blockingPatterns: {\n          continuousBlocking: 0,\n          intermittentBlocking: 0,\n          peakBlockingTime: 0,\n          averageBlockingTime: 0\n        },\n        responsivenessImpact: {\n          userInteractionDelay: 0,\n          frameDrops: 0,\n          responsivenessScore: 100\n        }\n      },\n      cpuUsageAnalysis: {\n        totalCpuTime: 0,\n        averageCpuUsage: 0,\n        peakCpuUsage: 0,\n        cpuIntensiveFunctions: [],\n        cpuUsagePatterns: {\n          highCpuPeriods: 0,\n          lowCpuPeriods: 0,\n          cpuSpikes: 0,\n          averageCpuPerPeriod: 0\n        },\n        cpuEfficiency: {\n          cpuUtilizationScore: 100,\n          cpuWastePercentage: 0,\n          optimizationPotential: 0\n        }\n      }\n    };\n  }\n\n  const analysis = analyzeProfile(profile);\n  // Chrome DevTools profile timestamps are in microseconds, so convert to milliseconds\n  const profileDurationMicroseconds = profile.endTime - profile.startTime;\n  const profileDuration = profileDurationMicroseconds / 1000; // Convert to milliseconds\n  \n  // Calculate total execution time (excluding idle time)\n  const totalExecutionTime = analysis.reduce((sum, func) => sum + func.totalTime, 0);\n  \n  // Get top 10 most expensive functions (already sorted by analyzeProfile)\n  const topFunctions = analysis.slice(0, 10).map(func => ({\n    name: func.originalFunctionName,\n    time: func.totalTime,\n    percentage: safePercentage(func.totalTime, totalExecutionTime),\n    calls: func.hitCount,\n    averageTime: func.averageTime,\n    source: func.originalSource,\n    line: func.originalLine\n  }));\n\n  // Calculate function call frequency\n  const functionCallFrequency: Record<string, number> = {};\n  analysis.forEach(func => {\n    if (func.hitCount > 0) {\n      functionCallFrequency[func.originalFunctionName] = func.hitCount;\n    }\n  });\n\n  // Analyze third-party script impact\n  const domainStats = new Map<string, {\n    domain: string;\n    time: number;\n    functions: number;\n  }>();\n\n  analysis.forEach(func => {\n    if (func.domain !== 'local' && func.domain !== 'unknown') {\n      if (!domainStats.has(func.domain)) {\n        domainStats.set(func.domain, {\n          domain: func.domain,\n          time: 0,\n          functions: 0\n        });\n      }\n      const stats = domainStats.get(func.domain)!;\n      stats.time += func.totalTime;\n      stats.functions += 1;\n    }\n  });\n\n  const thirdPartyScripts = Array.from(domainStats.values())\n    .map(script => ({\n      domain: script.domain,\n      time: script.time,\n      percentage: safePercentage(script.time, totalExecutionTime),\n      functions: script.functions\n    }))\n    .sort((a, b) => b.time - a.time);\n\n  const thirdPartyTotalTime = thirdPartyScripts.reduce((sum, script) => sum + script.time, 0);\n\n  // Calculate execution efficiency metrics\n  const idleTime = analysis.find(func => func.originalFunctionName === '(idle)')?.totalTime || 0;\n  const idleTimePercentage = safePercentage(idleTime, profileDuration);\n  \n  // JS execution time should exclude idle time to avoid double-counting\n  const jsExecutionTime = totalExecutionTime - idleTime;\n  const jsExecutionPercentage = safePercentage(jsExecutionTime, profileDuration);\n\n  return {\n    totalExecutionTime,\n    totalFunctions: analysis.length,\n    totalCalls: analysis.reduce((sum, func) => sum + func.hitCount, 0),\n    longestFunctionTime: analysis.length > 0 ? analysis[0].totalTime : 0,\n    topFunctions,\n    functionCallFrequency,\n    thirdPartyImpact: {\n      totalTime: thirdPartyTotalTime,\n      percentage: safePercentage(thirdPartyTotalTime, totalExecutionTime),\n      scripts: thirdPartyScripts\n    },\n    executionEfficiency: {\n      jsExecutionPercentage,\n      idleTimePercentage,\n      mainThreadBlockingTime: totalExecutionTime - idleTime\n    },\n    memoryAnalysis: analyzeMemoryUsage(profile, profileDuration),\n    threadBlockingAnalysis: analyzeThreadBlocking(profile, profileDuration),\n    cpuUsageAnalysis: analyzeCpuUsage(profile, profileDuration)\n  };\n}\n\n/**\n * Exports profile data in a readable format\n */\nexport function exportProfileData(profile: EnhancedProfile, format: 'json' | 'csv' = 'json') {\n  const analysis = analyzeProfile(profile);\n  \n  if (format === 'csv') {\n    const headers = 'Function Name,Source File,Line,Samples,Hit Count,Total Time,Average Time,Domain';\n    const rows = analysis.map(func => \n      `\"${func.originalFunctionName}\",\"${func.originalSource}\",${func.originalLine},${func.samples},${func.hitCount},${func.totalTime.toFixed(2)},${func.averageTime.toFixed(2)},\"${func.domain}\"`\n    );\n    return [headers, ...rows].join('\\n');\n  }\n  \n  return JSON.stringify(analysis, null, 2);\n}\n","import type { WebVitalsReport, GuardianResult } from '../types';\nimport fs from 'fs';\nimport path from 'path';\n\n/**\n * Generates an elegant HTML report for Web Vitals Guardian results\n * @param result - Guardian execution result\n * @param outputPath - Path to save the HTML report\n */\nexport function generateHTMLReport(result: GuardianResult, outputPath: string): void {\n  const html = createHTMLReport(result);\n  \n  // Ensure output directory exists\n  const outputDir = path.dirname(outputPath);\n  if (!fs.existsSync(outputDir)) {\n    fs.mkdirSync(outputDir, { recursive: true });\n  }\n  \n  fs.writeFileSync(outputPath, html);\n  console.log(`ðŸ“Š HTML report generated: ${outputPath}`);\n}\n\n/**\n * Creates the complete HTML report content\n */\n  function createHTMLReport(result: GuardianResult): string {\n    return `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Performance Analysis Dashboard</title>\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n    <script src=\"https://unpkg.com/tabulator-tables@5.5.2/dist/js/tabulator.min.js\"></script>\n    <link href=\"https://unpkg.com/tabulator-tables@5.5.2/dist/css/tabulator.min.css\" rel=\"stylesheet\">\n    <style>\n        ${getCSS()}\n    </style>\n</head>\n<body>\n    <div class=\"dashboard\">\n        <!-- Header -->\n        <header class=\"dashboard-header\">\n            <div class=\"header-content\">\n                <h1>Performance Analysis Dashboard</h1>\n                <p>Monitor Core Web Vitals, network performance, and JavaScript profiling across different user flows</p>\n            </div>\n            <div class=\"header-score\">\n                <div class=\"score-value\">${calculateOverallScore(result.reports)}</div>\n                <div class=\"score-label\">${getScoreLabel(calculateOverallScore(result.reports))}</div>\n            </div>\n        </header>\n\n        <!-- Navigation Tabs -->\n        <nav class=\"nav-tabs\">\n            <button class=\"nav-tab active\" data-tab=\"overview\">Overall</button>\n            ${result.reports.map((report, index) => `\n                <button class=\"nav-tab\" data-tab=\"scenario-${index}\">${report.scenario}</button>\n            `).join('')}\n        </nav>\n\n        <!-- Main Content -->\n        <main class=\"dashboard-content\">\n            <!-- Overview Tab -->\n            <div class=\"tab-content active\" id=\"overview\">\n                ${createOverviewContent(result.reports)}\n            </div>\n\n            <!-- Individual Scenario Tabs -->\n            ${result.reports.map((report, index) => `\n                <div class=\"tab-content\" id=\"scenario-${index}\">\n                    ${createScenarioContent(report, index)}\n                </div>\n            `).join('')}\n        </main>\n    </div>\n\n    <script>\n        // Embed data for JavaScript access\n        window.dashboardData = ${JSON.stringify(result.reports, null, 2)};\n        ${getJavaScript()}\n    </script>\n</body>\n</html>`;\n}\n\n/**\n * Creates CSS styles for the professional dashboard\n */\nfunction getCSS(): string {\n    return `\n    * {\n        margin: 0;\n        padding: 0;\n        box-sizing: border-box;\n    }\n\n    body {\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\n        background: #f8fafc;\n        color: #1f2937;\n        line-height: 1.6;\n    }\n\n    .dashboard {\n        min-height: 100vh;\n        background: #f8fafc;\n    }\n\n    /* Header */\n    .dashboard-header {\n        background: white;\n        padding: 2rem;\n        border-bottom: 1px solid #e5e7eb;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n    }\n\n    .header-content h1 {\n        font-size: 2rem;\n        font-weight: 700;\n        color: #1f2937;\n        margin-bottom: 0.5rem;\n    }\n\n    .header-content p {\n        color: #6b7280;\n        font-size: 1rem;\n    }\n\n    .header-score {\n        text-align: right;\n    }\n\n    .score-value {\n        font-size: 2.5rem;\n        font-weight: 700;\n        color: #1f2937;\n    }\n\n    .score-label {\n        font-size: 0.875rem;\n        color: #6b7280;\n        font-weight: 500;\n    }\n\n    /* Navigation Tabs */\n    .nav-tabs {\n        background: white;\n        border-bottom: 1px solid #e5e7eb;\n        padding: 0 2rem;\n        display: flex;\n        gap: 0;\n    }\n\n    .nav-tab {\n        padding: 1rem 1.5rem;\n        border: none;\n        background: none;\n        cursor: pointer;\n        font-size: 0.875rem;\n        font-weight: 500;\n        color: #6b7280;\n        border-bottom: 2px solid transparent;\n        transition: all 0.2s ease;\n        position: relative;\n    }\n\n    .nav-tab:hover {\n        color: #374151;\n        background: #f9fafb;\n    }\n\n    .nav-tab.active {\n        color: #1f2937;\n        border-bottom-color: #3b82f6;\n        background: #f9fafb;\n    }\n\n    /* Main Content */\n    .dashboard-content {\n        padding: 2rem;\n        max-width: 1400px;\n        margin: 0 auto;\n    }\n\n    .tab-content {\n        display: none;\n    }\n\n    .tab-content.active {\n        display: block;\n    }\n\n    /* Performance Scores Section */\n    .performance-scores {\n        margin-bottom: 2rem;\n    }\n\n    .section-title {\n        font-size: 1.25rem;\n        font-weight: 600;\n        color: #1f2937;\n        margin-bottom: 1rem;\n    }\n\n    .scores-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        gap: 1rem;\n    }\n\n    .score-card {\n        background: white;\n        border-radius: 8px;\n        padding: 1.5rem;\n        border: 1px solid #e5e7eb;\n        text-align: center;\n    }\n\n    .score-card.excellent {\n        border-left: 4px solid #10b981;\n    }\n\n    .score-card.good {\n        border-left: 4px solid #f59e0b;\n    }\n\n    .score-card.needs-improvement {\n        border-left: 4px solid #ef4444;\n    }\n\n    .score-card-value {\n        font-size: 2rem;\n        font-weight: 700;\n        margin-bottom: 0.25rem;\n    }\n\n    .score-card-label {\n        font-size: 0.875rem;\n        color: #6b7280;\n        font-weight: 500;\n    }\n\n    .score-card-status {\n        font-size: 0.75rem;\n        font-weight: 600;\n        margin-top: 0.5rem;\n        padding: 0.25rem 0.5rem;\n        border-radius: 4px;\n        display: inline-block;\n    }\n\n    .score-card-status.excellent {\n        background: #dcfce7;\n        color: #166534;\n    }\n\n    .score-card-status.good {\n        background: #fef3c7;\n        color: #92400e;\n    }\n\n    .score-card-status.needs-improvement {\n        background: #fecaca;\n        color: #dc2626;\n    }\n\n    /* Core Web Vitals Section */\n    .core-web-vitals {\n        margin-bottom: 2rem;\n    }\n\n    .vitals-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n        gap: 1rem;\n    }\n\n    .vital-card {\n        background: white;\n        border-radius: 8px;\n        padding: 1.5rem;\n        border: 1px solid #e5e7eb;\n        position: relative;\n    }\n\n    .vital-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 1rem;\n    }\n\n    .vital-name {\n        font-size: 0.875rem;\n        font-weight: 600;\n        color: #1f2937;\n    }\n\n    .vital-status {\n        font-size: 0.75rem;\n        font-weight: 600;\n        padding: 0.25rem 0.5rem;\n        border-radius: 4px;\n        background: #dcfce7;\n        color: #166534;\n    }\n\n    .vital-value {\n        font-size: 1.5rem;\n        font-weight: 700;\n        color: #1f2937;\n        margin-bottom: 0.5rem;\n    }\n\n    .vital-description {\n        font-size: 0.75rem;\n        color: #6b7280;\n        margin-bottom: 1rem;\n    }\n\n    .vital-chart {\n        height: 60px;\n        background: #f3f4f6;\n        border-radius: 4px;\n        position: relative;\n        overflow: hidden;\n    }\n\n    .vital-chart-line {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        height: 2px;\n        background: #3b82f6;\n        border-radius: 1px;\n    }\n\n    /* Content Grid */\n    .content-grid {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 2rem;\n        margin-bottom: 2rem;\n    }\n\n    /* Network Analysis Section */\n    .network-analysis {\n        background: white;\n        border-radius: 8px;\n        border: 1px solid #e5e7eb;\n        overflow: hidden;\n    }\n\n    .section-header {\n        padding: 1.5rem;\n        border-bottom: 1px solid #e5e7eb;\n        background: #f9fafb;\n    }\n\n    .section-header h3 {\n        font-size: 1.125rem;\n        font-weight: 600;\n        color: #1f2937;\n        margin-bottom: 0.5rem;\n    }\n\n    .section-summary {\n        display: flex;\n        gap: 1rem;\n        font-size: 0.875rem;\n        color: #6b7280;\n    }\n\n    .network-content {\n        padding: 1.5rem;\n        overflow: auto;\n    }\n\n    .network-table {\n        width: 100%;\n        border-collapse: collapse;\n        font-size: 0.875rem;\n        background: white;\n        border-radius: 8px;\n        overflow: hidden;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n    }\n\n    .network-table th,\n    .network-table td {\n        padding: 0.75rem;\n        text-align: left;\n        border-bottom: 1px solid #e5e7eb;\n    }\n\n    .network-table th {\n        background: #f9fafb;\n        font-weight: 600;\n        color: #374151;\n        font-size: 0.75rem;\n        text-transform: uppercase;\n        letter-spacing: 0.05em;\n    }\n\n    .network-table tr {\n        cursor: pointer;\n        transition: background-color 0.2s ease;\n    }\n\n    .network-table tr:hover {\n        background: #f8fafc;\n    }\n\n    .network-table tr.expanded {\n        background: #f1f5f9;\n    }\n\n    .network-table tr.expanded:hover {\n        background: #e2e8f0;\n    }\n\n    .expandable-row {\n        display: none;\n    }\n\n    .expandable-row.active {\n        display: table-row;\n    }\n\n    .expandable-content {\n        padding: 1rem;\n        background: #f8fafc;\n        border-top: 1px solid #e2e8f0;\n    }\n\n    .network-details {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        gap: 1rem;\n        margin-bottom: 1rem;\n    }\n\n    .detail-group {\n        background: white;\n        padding: 0.75rem;\n        border-radius: 6px;\n        border: 1px solid #e2e8f0;\n    }\n\n    .detail-label {\n        font-size: 0.75rem;\n        font-weight: 600;\n        color: #6b7280;\n        text-transform: uppercase;\n        letter-spacing: 0.05em;\n        margin-bottom: 0.25rem;\n    }\n\n    .detail-value {\n        font-size: 0.875rem;\n        color: #1f2937;\n        word-break: break-all;\n    }\n\n    .timing-breakdown {\n        margin-top: 1rem;\n    }\n\n    .timing-item {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 0.5rem 0;\n        border-bottom: 1px solid #e2e8f0;\n    }\n\n    .timing-item:last-child {\n        border-bottom: none;\n    }\n\n    .timing-label {\n        font-size: 0.875rem;\n        color: #6b7280;\n    }\n\n    .timing-value {\n        font-size: 0.875rem;\n        font-weight: 600;\n        color: #1f2937;\n    }\n    \n    .timing-unavailable {\n        background: #f9fafb;\n        border-color: #e5e7eb;\n    }\n    \n    .timing-unavailable .timing-value {\n        color: #6b7280;\n    }\n    \n    .timing-note {\n        font-size: 0.75rem;\n        color: #6b7280;\n        margin-top: 0.25rem;\n        font-style: italic;\n    }\n    \n    .cache-notice, .connection-notice {\n        background: #f0f9ff;\n        border: 1px solid #3b82f6;\n        border-radius: 6px;\n        padding: 0.75rem;\n        margin-top: 1rem;\n        font-size: 0.875rem;\n        color: #1e40af;\n    }\n    \n    .connection-notice {\n        background: #f0fdf4;\n        border-color: #22c55e;\n        color: #15803d;\n    }\n    \n    .timing-discrepancy-notice {\n        background: #fef3c7;\n        border: 1px solid #f59e0b;\n        border-radius: 6px;\n        padding: 0.75rem;\n        margin-top: 1rem;\n        font-size: 0.875rem;\n        color: #92400e;\n        line-height: 1.4;\n    }\n    \n    .headers-section, .security-section {\n        margin-top: 1.5rem;\n    }\n    \n    .headers-section h4, .security-section h4 {\n        color: #374151;\n        font-size: 1rem;\n        font-weight: 600;\n        margin-bottom: 1rem;\n    }\n    \n    .headers-grid, .security-grid {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 1rem;\n    }\n    \n    .headers-card, .security-card {\n        background: #f8fafc;\n        border: 1px solid #e2e8f0;\n        border-radius: 8px;\n        padding: 1rem;\n    }\n    \n    .headers-card h5 {\n        color: #374151;\n        font-size: 0.875rem;\n        font-weight: 600;\n        margin-bottom: 0.75rem;\n    }\n    \n    .headers-list {\n        max-height: 200px;\n        overflow-y: auto;\n    }\n    \n    .header-item {\n        display: flex;\n        margin-bottom: 0.5rem;\n        font-size: 0.75rem;\n    }\n    \n    .header-key {\n        color: #6b7280;\n        font-weight: 500;\n        min-width: 120px;\n        margin-right: 0.5rem;\n    }\n    \n    .header-value {\n        color: #1f2937;\n        word-break: break-all;\n    }\n    \n    .security-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        gap: 0.75rem;\n    }\n    \n    .security-label {\n        font-size: 0.75rem;\n        color: #6b7280;\n        font-weight: 500;\n    }\n    \n    .security-value {\n        font-size: 0.875rem;\n        color: #1f2937;\n        font-weight: 600;\n        margin-top: 0.25rem;\n        word-break: break-all;\n    }\n\n    .expand-icon {\n        display: inline-block;\n        width: 16px;\n        height: 16px;\n        margin-right: 0.5rem;\n        transition: transform 0.2s ease;\n    }\n\n    .expand-icon.expanded {\n        transform: rotate(90deg);\n    }\n\n    /* Network Details Modal */\n    .network-details-modal {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        z-index: 1000;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n\n    .modal-backdrop {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.5);\n        backdrop-filter: blur(4px);\n    }\n\n    .modal-content {\n        background: white;\n        border-radius: 12px;\n        width: 90%;\n        max-width: 800px;\n        max-height: 90vh;\n        overflow-y: auto;\n        position: relative;\n        z-index: 1001;\n        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);\n    }\n\n    .modal-header {\n        padding: 1.5rem;\n        border-bottom: 1px solid #e5e7eb;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    .modal-header h3 {\n        font-size: 1.25rem;\n        font-weight: 600;\n        color: #1f2937;\n        margin: 0;\n    }\n\n    .modal-header button {\n        background: none;\n        border: none;\n        font-size: 1.5rem;\n        cursor: pointer;\n        color: #6b7280;\n        padding: 0.5rem;\n        border-radius: 4px;\n    }\n\n    .modal-header button:hover {\n        background: #f3f4f6;\n        color: #374151;\n    }\n\n    .modal-body {\n        padding: 1.5rem;\n    }\n\n    .network-details {\n        margin-bottom: 1.5rem;\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        gap: 1rem;\n        max-width: 100%;\n    }\n\n    .detail-card {\n        background: #ffffff;\n        border: 1px solid #e5e7eb;\n        border-radius: 8px;\n        padding: 1rem;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n        transition: box-shadow 0.2s ease;\n        max-width: 100%;\n        overflow: hidden;\n        word-wrap: break-word;\n        overflow-wrap: break-word;\n    }\n\n    .detail-card:hover {\n        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    }\n\n    .detail-label {\n        font-weight: 600;\n        color: #6b7280;\n        font-size: 0.75rem;\n        text-transform: uppercase;\n        letter-spacing: 0.05em;\n        margin-bottom: 0.5rem;\n        display: block;\n    }\n\n    .detail-value {\n        color: #1f2937;\n        font-size: 0.875rem;\n        font-weight: 500;\n        word-break: break-word;\n        word-wrap: break-word;\n        overflow-wrap: break-word;\n        line-height: 1.4;\n        max-width: 100%;\n    }\n\n    .timing-breakdown {\n        background: #f9fafb;\n        border-radius: 8px;\n        padding: 1rem;\n        max-width: 100%;\n        word-wrap: break-word;\n        overflow-wrap: break-word;\n        box-sizing: border-box;\n    }\n\n    .timing-breakdown h4 {\n        margin: 0 0 1rem 0;\n        color: #374151;\n        font-size: 0.875rem;\n        font-weight: 600;\n        text-transform: uppercase;\n        letter-spacing: 0.05em;\n    }\n\n    .timing-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n        gap: 0.75rem;\n        max-width: 100%;\n    }\n\n    .timing-card {\n        background: #ffffff;\n        border: 1px solid #e5e7eb;\n        border-radius: 6px;\n        padding: 0.75rem;\n        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);\n        transition: box-shadow 0.2s ease;\n        max-width: 100%;\n        overflow: hidden;\n        word-wrap: break-word;\n        overflow-wrap: break-word;\n    }\n\n    .timing-card:hover {\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n    }\n\n    .timing-label {\n        color: #6b7280;\n        font-weight: 500;\n        font-size: 0.75rem;\n        text-transform: uppercase;\n        letter-spacing: 0.05em;\n        margin-bottom: 0.25rem;\n        display: block;\n    }\n\n    .timing-value {\n        color: #1f2937;\n        font-weight: 600;\n        font-size: 0.875rem;\n        word-wrap: break-word;\n        overflow-wrap: break-word;\n        max-width: 100%;\n    }\n\n    /* Tabulator Custom Styling to Match Dashboard */\n    .tabulator {\n        background: #ffffff;\n        border: 1px solid #e5e7eb;\n        border-radius: 8px;\n        font-family: inherit;\n    }\n\n    .tabulator .tabulator-header {\n        background: #f8fafc;\n        border-bottom: 1px solid #e5e7eb;\n    }\n\n    .tabulator .tabulator-header .tabulator-col {\n        background: #f8fafc;\n        border-right: 1px solid #e5e7eb;\n        color: #374151;\n        font-weight: 600;\n        font-size: 0.875rem;\n    }\n\n    .tabulator .tabulator-header .tabulator-col:hover {\n        background: #f1f5f9;\n        color: #1f2937;\n    }\n\n    .tabulator .tabulator-header .tabulator-col.tabulator-sortable:hover {\n        background: #f1f5f9;\n        color: #3b82f6;\n    }\n\n    .tabulator .tabulator-header .tabulator-col.tabulator-sorted {\n        background: #f1f5f9;\n        color: #3b82f6;\n    }\n\n    .tabulator .tabulator-header .tabulator-col.tabulator-sorted .tabulator-col-sorter {\n        color: #3b82f6;\n    }\n\n    .tabulator .tabulator-tableholder {\n        background: #ffffff;\n    }\n\n    .tabulator .tabulator-tableholder .tabulator-table {\n        background: #ffffff;\n    }\n\n    .tabulator .tabulator-row {\n        background: #ffffff;\n        border-bottom: 1px solid #f3f4f6;\n        color: #374151;\n    }\n\n    .tabulator .tabulator-row:hover {\n        background: #f8fafc;\n        color: #1f2937;\n    }\n\n    .tabulator .tabulator-row.tabulator-selectable:hover {\n        background: #f1f5f9;\n        color: #1f2937;\n    }\n\n    .tabulator .tabulator-row.tabulator-selected {\n        background: #dbeafe;\n        color: #1e40af;\n    }\n\n    .tabulator .tabulator-row.tabulator-selected:hover {\n        background: #bfdbfe;\n        color: #1e40af;\n    }\n\n    .tabulator .tabulator-cell {\n        border-right: 1px solid #f3f4f6;\n        padding: 0.75rem 1rem;\n        font-size: 0.875rem;\n        color: #374151;\n    }\n\n    .tabulator .tabulator-row:hover .tabulator-cell {\n        color: #1f2937;\n    }\n\n    .tabulator .tabulator-footer {\n        background: #f8fafc;\n        border-top: 1px solid #e5e7eb;\n        color: #6b7280;\n        font-size: 0.875rem;\n    }\n\n    .tabulator .tabulator-footer .tabulator-page {\n        background: #ffffff;\n        border: 1px solid #d1d5db;\n        color: #374151;\n        margin: 0 2px;\n        padding: 0.5rem 0.75rem;\n        border-radius: 4px;\n    }\n\n    .tabulator .tabulator-footer .tabulator-page:hover {\n        background: #f3f4f6;\n        color: #1f2937;\n        border-color: #9ca3af;\n    }\n\n    .tabulator .tabulator-footer .tabulator-page.active {\n        background: #3b82f6;\n        color: #ffffff;\n        border-color: #3b82f6;\n    }\n\n    .tabulator .tabulator-footer .tabulator-page.active:hover {\n        background: #2563eb;\n        border-color: #2563eb;\n    }\n\n    .tabulator .tabulator-footer .tabulator-page-size {\n        background: #ffffff;\n        border: 1px solid #d1d5db;\n        color: #374151;\n        padding: 0.5rem 0.75rem;\n        border-radius: 4px;\n        margin: 0 4px;\n    }\n\n    .tabulator .tabulator-footer .tabulator-page-size:hover {\n        background: #f3f4f6;\n        color: #1f2937;\n        border-color: #9ca3af;\n    }\n\n    .tabulator .tabulator-footer .tabulator-page-size.active {\n        background: #3b82f6;\n        color: #ffffff;\n        border-color: #3b82f6;\n    }\n\n    /* Search and Filter Styling */\n    .tabulator .tabulator-header-filter {\n        background: #ffffff;\n        border: 1px solid #d1d5db;\n        border-radius: 4px;\n        padding: 0.5rem;\n        font-size: 0.875rem;\n        color: #374151;\n    }\n\n    .tabulator .tabulator-header-filter:focus {\n        outline: none;\n        border-color: #3b82f6;\n        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    /* Loading and Empty States */\n    .tabulator .tabulator-loading {\n        background: rgba(248, 250, 252, 0.8);\n        color: #6b7280;\n    }\n\n    .tabulator .tabulator-empty {\n        background: #ffffff;\n        color: #6b7280;\n    }\n\n    /* Expandable Row Styling */\n    .tabulator .tabulator-row-expanded {\n        background: #f1f5f9 !important;\n        border-left: 3px solid #3b82f6;\n    }\n\n    .tabulator .tabulator-row-expanded .tabulator-cell {\n        background: #f1f5f9 !important;\n    }\n\n    .tabulator-row-expanded-content {\n        background: #f8fafc;\n        border-left: 3px solid #3b82f6;\n        border-bottom: 1px solid #e5e7eb;\n        animation: expandRow 0.3s ease-out;\n        overflow-x: hidden;\n        overflow-y: auto;\n        word-wrap: break-word;\n        overflow-wrap: break-word;\n        max-width: 100%;\n        box-sizing: border-box;\n        max-height: 500px;\n        pointer-events: auto;\n        position: relative;\n        z-index: 1;\n    }\n\n    .tabulator-row-expanded-content > div {\n        max-width: 100%;\n        overflow: visible;\n        word-wrap: break-word;\n        overflow-wrap: break-word;\n        box-sizing: border-box;\n    }\n\n    @keyframes expandRow {\n        from {\n            opacity: 0;\n            max-height: 0;\n            padding: 0;\n        }\n        to {\n            opacity: 1;\n            max-height: 1000px;\n            padding: 1rem;\n        }\n    }\n\n    .expand-icon {\n        display: inline-block;\n        width: 16px;\n        height: 16px;\n        margin-right: 0.5rem;\n        transition: transform 0.2s ease;\n        cursor: pointer;\n        user-select: none;\n    }\n\n    .expand-icon:hover {\n        color: #3b82f6;\n    }\n\n    /* Responsive Design */\n    @media (max-width: 768px) {\n        .tabulator .tabulator-cell {\n            padding: 0.5rem 0.75rem;\n            font-size: 0.8rem;\n        }\n        \n        .tabulator .tabulator-header .tabulator-col {\n            font-size: 0.8rem;\n            padding: 0.5rem 0.75rem;\n        }\n\n        /* Mobile responsive expanded rows */\n        .tabulator-row-expanded-content {\n            padding: 0.75rem;\n            max-height: 800px;\n            max-width: 100%;\n            overflow-x: hidden;\n            overflow-y: auto;\n            word-wrap: break-word;\n            overflow-wrap: break-word;\n        }\n\n        .tabulator-row-expanded-content > div {\n            max-width: 100%;\n            overflow: visible;\n            word-wrap: break-word;\n            overflow-wrap: break-word;\n        }\n\n        .network-details {\n            grid-template-columns: 1fr;\n            gap: 0.75rem;\n        }\n\n        .detail-card {\n            padding: 0.75rem;\n        }\n\n        .detail-label {\n            font-size: 0.7rem;\n        }\n\n        .detail-value {\n            font-size: 0.8rem;\n        }\n\n        .timing-grid {\n            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n            gap: 0.5rem;\n        }\n\n        .timing-card {\n            padding: 0.5rem;\n        }\n\n        .timing-label {\n            font-size: 0.7rem;\n        }\n\n        .timing-value {\n            font-size: 0.8rem;\n        }\n\n        .timing-breakdown {\n            padding: 0.75rem;\n            max-width: 100%;\n            overflow: hidden;\n            word-wrap: break-word;\n            overflow-wrap: break-word;\n        }\n\n        .timing-item {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 0.25rem;\n            padding: 0.4rem 0;\n            max-width: 100%;\n            overflow: hidden;\n            word-wrap: break-word;\n            overflow-wrap: break-word;\n        }\n\n        .timing-label {\n            min-width: auto;\n            font-size: 0.8rem;\n            max-width: 100%;\n            overflow: hidden;\n            word-wrap: break-word;\n            overflow-wrap: break-word;\n        }\n\n        .timing-value {\n            text-align: left;\n            font-size: 0.8rem;\n            max-width: 100%;\n            overflow: hidden;\n            word-wrap: break-word;\n            overflow-wrap: break-word;\n        }\n    }\n\n    @media (max-width: 480px) {\n        .tabulator-row-expanded-content {\n            padding: 0.5rem;\n            max-height: 600px;\n            max-width: 100%;\n            overflow-x: hidden;\n            overflow-y: auto;\n            word-wrap: break-word;\n            overflow-wrap: break-word;\n        }\n\n        .tabulator-row-expanded-content > div {\n            max-width: 100%;\n            overflow: visible;\n            word-wrap: break-word;\n            overflow-wrap: break-word;\n        }\n\n        .network-details {\n            grid-template-columns: 1fr;\n            gap: 0.5rem;\n        }\n\n        .detail-card {\n            padding: 0.5rem;\n        }\n\n        .detail-label {\n            font-size: 0.65rem;\n        }\n\n        .detail-value {\n            font-size: 0.75rem;\n        }\n\n        .timing-grid {\n            grid-template-columns: 1fr;\n            gap: 0.4rem;\n        }\n\n        .timing-card {\n            padding: 0.4rem;\n        }\n\n        .timing-label {\n            font-size: 0.65rem;\n        }\n\n        .timing-value {\n            font-size: 0.75rem;\n        }\n\n        .timing-breakdown {\n            padding: 0.5rem;\n        }\n    }\n\n    .resource-type {\n        padding: 0.25rem 0.5rem;\n        border-radius: 4px;\n        font-size: 0.75rem;\n        font-weight: 500;\n        text-transform: uppercase;\n    }\n\n    .resource-type.document { background: #dbeafe; color: #1e40af; }\n    .resource-type.script { background: #fce7f3; color: #be185d; }\n    .resource-type.stylesheet { background: #dcfce7; color: #166534; }\n    .resource-type.image { background: #fef3c7; color: #92400e; }\n    .resource-type.font { background: #e0e7ff; color: #3730a3; }\n    .resource-type.xhr { background: #f3f4f6; color: #374151; }\n\n    .status-badge {\n        padding: 0.25rem 0.5rem;\n        border-radius: 4px;\n        font-size: 0.75rem;\n        font-weight: 500;\n    }\n\n    .status-success {\n        background: #dcfce7;\n        color: #166534;\n    }\n\n    .priority-badge {\n        padding: 0.25rem 0.5rem;\n        border-radius: 4px;\n        font-size: 0.75rem;\n        font-weight: 500;\n    }\n\n    .priority-high {\n        background: #fecaca;\n        color: #dc2626;\n    }\n\n    .priority-medium {\n        background: #f3f4f6;\n        color: #374151;\n    }\n\n    .view-btn {\n        background: #3b82f6;\n        color: white;\n        border: none;\n        padding: 0.375rem 0.75rem;\n        border-radius: 4px;\n        font-size: 0.75rem;\n        font-weight: 500;\n        cursor: pointer;\n        transition: background-color 0.2s ease;\n    }\n\n    .view-btn:hover {\n        background: #2563eb;\n    }\n\n    .view-btn:active {\n        background: #1d4ed8;\n    }\n\n    /* JavaScript Profiler Section */\n    .js-profiler {\n        background: white;\n        border-radius: 8px;\n        border: 1px solid #e5e7eb;\n        overflow: hidden;\n    }\n\n    .profiler-content {\n        padding: 1.5rem;\n    }\n\n    .profiler-section {\n        margin-bottom: 2rem;\n    }\n\n    .profiler-section h4 {\n        font-size: 1rem;\n        font-weight: 600;\n        color: #374151;\n        margin-bottom: 1rem;\n        border-bottom: 1px solid #e5e7eb;\n        padding-bottom: 0.5rem;\n    }\n\n    /* Collapsible profiler sections */\n    .profiler-section-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        cursor: pointer;\n        padding: 0.75rem 1rem;\n        background: #f8fafc;\n        border: 1px solid #e2e8f0;\n        border-radius: 6px;\n        margin-bottom: 0.5rem;\n        transition: background-color 0.2s ease;\n    }\n\n    .profiler-section-header:hover {\n        background: #f1f5f9;\n    }\n\n    .profiler-section-header h4 {\n        margin: 0;\n        font-size: 0.95rem;\n        font-weight: 600;\n        color: #374151;\n        border: none;\n        padding: 0;\n    }\n\n    .toggle-icon {\n        font-size: 0.875rem;\n        color: #6b7280;\n        transition: transform 0.2s ease;\n        user-select: none;\n    }\n\n    .profiler-section-content {\n        overflow: hidden;\n        transition: max-height 0.3s ease-out, opacity 0.2s ease-out;\n        max-height: 1000px;\n        opacity: 1;\n    }\n\n    .profiler-section-content.collapsed {\n        max-height: 0;\n        opacity: 0;\n    }\n\n    .function-list {\n        margin-bottom: 1.5rem;\n    }\n\n    /* Thread Blocking Analysis Styles */\n    .thread-blocking-content {\n        padding: 1rem;\n    }\n\n    .blocking-subsection {\n        margin-bottom: 2rem;\n    }\n\n    .blocking-subsection h5 {\n        font-size: 0.9rem;\n        font-weight: 600;\n        color: #374151;\n        margin-bottom: 1rem;\n        border-bottom: 1px solid #e5e7eb;\n        padding-bottom: 0.5rem;\n    }\n\n    .blocking-events-list {\n        display: flex;\n        flex-direction: column;\n        gap: 0.75rem;\n    }\n\n    .blocking-event-item {\n        background: #f8fafc;\n        border: 1px solid #e2e8f0;\n        border-radius: 6px;\n        padding: 0.75rem;\n    }\n\n    .blocking-function {\n        font-weight: 600;\n        color: #1f2937;\n        margin-bottom: 0.5rem;\n        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n        font-size: 0.875rem;\n    }\n\n    .blocking-severity {\n        display: flex;\n        align-items: center;\n        gap: 0.5rem;\n        margin-bottom: 0.5rem;\n    }\n\n    .severity-badge {\n        font-size: 0.75rem;\n        font-weight: 600;\n        padding: 0.25rem 0.5rem;\n        border-radius: 4px;\n        text-transform: uppercase;\n    }\n\n    .severity-badge.low {\n        background: #dcfce7;\n        color: #166534;\n    }\n\n    .severity-badge.medium {\n        background: #fef3c7;\n        color: #92400e;\n    }\n\n    .severity-badge.high {\n        background: #fed7aa;\n        color: #c2410c;\n    }\n\n    .severity-badge.critical {\n        background: #fecaca;\n        color: #dc2626;\n    }\n\n    .blocking-time {\n        font-size: 0.875rem;\n        font-weight: 600;\n        color: #374151;\n    }\n\n    .blocking-details {\n        font-size: 0.75rem;\n        color: #6b7280;\n    }\n\n    .responsiveness-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n        gap: 1rem;\n    }\n\n    .responsiveness-metric {\n        background: #f8fafc;\n        border: 1px solid #e2e8f0;\n        border-radius: 6px;\n        padding: 1rem;\n        text-align: center;\n    }\n\n    /* CPU Usage Analysis Styles */\n    .cpu-usage-content {\n        padding: 1rem;\n    }\n\n    .cpu-subsection {\n        margin-bottom: 2rem;\n    }\n\n    .cpu-subsection h5 {\n        font-size: 0.9rem;\n        font-weight: 600;\n        color: #374151;\n        margin-bottom: 1rem;\n        border-bottom: 1px solid #e5e7eb;\n        padding-bottom: 0.5rem;\n    }\n\n    .cpu-functions-list {\n        display: flex;\n        flex-direction: column;\n        gap: 0.75rem;\n    }\n\n    .cpu-function-item {\n        background: #f8fafc;\n        border: 1px solid #e2e8f0;\n        border-radius: 6px;\n        padding: 0.75rem;\n    }\n\n    .cpu-function-name {\n        font-weight: 600;\n        color: #1f2937;\n        margin-bottom: 0.5rem;\n        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n        font-size: 0.875rem;\n    }\n\n    .cpu-usage-bar {\n        width: 100%;\n        height: 8px;\n        background: #e5e7eb;\n        border-radius: 4px;\n        overflow: hidden;\n        margin-bottom: 0.5rem;\n    }\n\n    .cpu-usage-fill {\n        height: 100%;\n        background: linear-gradient(90deg, #3b82f6, #1d4ed8);\n        border-radius: 4px;\n        transition: width 0.3s ease;\n    }\n\n    .cpu-stats {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        font-size: 0.75rem;\n        color: #6b7280;\n    }\n\n    .cpu-time {\n        font-weight: 600;\n        color: #374151;\n    }\n\n    .cpu-percentage {\n        font-weight: 600;\n        color: #3b82f6;\n    }\n\n    .cpu-calls {\n        color: #6b7280;\n    }\n\n    .cpu-efficiency-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n        gap: 1rem;\n    }\n\n    .cpu-metric {\n        background: #f8fafc;\n        border: 1px solid #e2e8f0;\n        border-radius: 6px;\n        padding: 1rem;\n        text-align: center;\n    }\n\n    .cpu-metric .metric-label {\n        font-size: 0.75rem;\n        color: #6b7280;\n        margin-bottom: 0.5rem;\n        font-weight: 500;\n    }\n\n    .cpu-metric .metric-value {\n        font-size: 1.25rem;\n        font-weight: 700;\n        color: #1f2937;\n    }\n\n    .function-item {\n        display: flex;\n        align-items: center;\n        margin-bottom: 0.75rem;\n        padding: 0.5rem;\n        border-radius: 4px;\n        transition: background-color 0.2s ease;\n    }\n\n    .function-item:hover {\n        background: #f9fafb;\n    }\n\n    .function-name {\n        font-size: 0.875rem;\n        font-weight: 500;\n        color: #1f2937;\n        margin-right: 1rem;\n        min-width: 200px;\n        cursor: help;\n    }\n\n    .function-bar {\n        flex: 1;\n        height: 8px;\n        background: #e5e7eb;\n        border-radius: 4px;\n        margin-right: 1rem;\n        position: relative;\n        overflow: hidden;\n    }\n\n    .function-bar-fill {\n        height: 100%;\n        background: #3b82f6;\n        border-radius: 4px;\n        transition: width 0.3s ease;\n    }\n\n    .function-time {\n        font-size: 0.75rem;\n        color: #6b7280;\n        min-width: 120px;\n        text-align: right;\n        display: flex;\n        flex-direction: column;\n        align-items: flex-end;\n    }\n\n    .function-calls {\n        font-size: 0.65rem;\n        color: #9ca3af;\n        margin-top: 0.125rem;\n    }\n\n    /* Third-Party Impact Styles */\n    .third-party-impact {\n        margin-bottom: 1.5rem;\n    }\n\n    .third-party-item {\n        display: flex;\n        align-items: center;\n        margin-bottom: 0.75rem;\n        padding: 0.5rem;\n        border-radius: 4px;\n        transition: background-color 0.2s ease;\n    }\n\n    .third-party-item:hover {\n        background: #f9fafb;\n    }\n\n    .script-domain {\n        font-size: 0.875rem;\n        font-weight: 500;\n        color: #1f2937;\n        margin-right: 1rem;\n        min-width: 200px;\n        word-break: break-all;\n    }\n\n    .script-bar {\n        flex: 1;\n        height: 8px;\n        background: #e5e7eb;\n        border-radius: 4px;\n        margin-right: 1rem;\n        position: relative;\n        overflow: hidden;\n    }\n\n    .script-bar-fill {\n        height: 100%;\n        background: #f59e0b;\n        border-radius: 4px;\n        transition: width 0.3s ease;\n    }\n\n    .script-stats {\n        font-size: 0.75rem;\n        color: #6b7280;\n        min-width: 120px;\n        text-align: right;\n        display: flex;\n        flex-direction: column;\n        align-items: flex-end;\n    }\n\n    .script-functions {\n        font-size: 0.65rem;\n        color: #9ca3af;\n        margin-top: 0.125rem;\n    }\n\n    /* Function Call Frequency Styles */\n    .call-frequency-list {\n        margin-bottom: 1.5rem;\n    }\n\n    .frequency-item {\n        display: flex;\n        align-items: center;\n        margin-bottom: 0.75rem;\n        padding: 0.5rem;\n        border-radius: 4px;\n        transition: background-color 0.2s ease;\n    }\n\n    .frequency-item:hover {\n        background: #f9fafb;\n    }\n\n    .frequency-name {\n        font-size: 0.875rem;\n        font-weight: 500;\n        color: #1f2937;\n        margin-right: 1rem;\n        min-width: 200px;\n    }\n\n    .frequency-count {\n        font-size: 0.75rem;\n        color: #6b7280;\n        min-width: 80px;\n        text-align: right;\n        margin-right: 1rem;\n    }\n\n    .frequency-bar {\n        flex: 1;\n        height: 8px;\n        background: #e5e7eb;\n        border-radius: 4px;\n        position: relative;\n        overflow: hidden;\n    }\n\n    .frequency-bar-fill {\n        height: 100%;\n        background: #10b981;\n        border-radius: 4px;\n        transition: width 0.3s ease;\n    }\n\n    .function-chart {\n        height: 200px;\n        margin-bottom: 1.5rem;\n    }\n\n    .profiler-stats {\n        display: grid;\n        grid-template-columns: repeat(4, 1fr);\n        gap: 1rem;\n    }\n\n    .profiler-stat {\n        text-align: center;\n        padding: 1rem;\n        background: #f9fafb;\n        border-radius: 6px;\n    }\n\n    .profiler-stat-value {\n        font-size: 1.25rem;\n        font-weight: 700;\n        color: #1f2937;\n        margin-bottom: 0.25rem;\n    }\n\n    .profiler-stat-label {\n        font-size: 0.75rem;\n        color: #6b7280;\n        font-weight: 500;\n    }\n\n    /* Performance Summary */\n    .performance-summary {\n        display: grid;\n        grid-template-columns: repeat(4, 1fr);\n        gap: 1rem;\n    }\n\n    .summary-card {\n        background: white;\n        border-radius: 8px;\n        padding: 1.5rem;\n        border: 1px solid #e5e7eb;\n        text-align: center;\n    }\n\n    .summary-value {\n        font-size: 1.5rem;\n        font-weight: 700;\n        color: #1f2937;\n        margin-bottom: 0.25rem;\n    }\n\n    .summary-label {\n        font-size: 0.875rem;\n        color: #6b7280;\n        font-weight: 500;\n    }\n\n    /* Charts */\n    .chart-container {\n        position: relative;\n        height: 300px;\n        margin: 1rem 0;\n    }\n\n    /* Responsive Design */\n    @media (max-width: 1024px) {\n        .content-grid {\n            grid-template-columns: 1fr;\n        }\n        \n        .vitals-grid {\n            grid-template-columns: repeat(2, 1fr);\n        }\n    }\n\n    @media (max-width: 768px) {\n        .dashboard-header {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 1rem;\n        }\n        \n        .nav-tabs {\n            padding: 0 1rem;\n            overflow-x: auto;\n        }\n        \n        .dashboard-content {\n            padding: 1rem;\n        }\n        \n        .vitals-grid {\n            grid-template-columns: 1fr;\n        }\n        \n        .performance-summary {\n            grid-template-columns: repeat(2, 1fr);\n        }\n        \n        .profiler-stats {\n            grid-template-columns: repeat(2, 1fr);\n        }\n    }\n\n    @media (max-width: 480px) {\n        .performance-summary {\n            grid-template-columns: 1fr;\n        }\n        \n        .profiler-stats {\n            grid-template-columns: 1fr;\n        }\n    }\n    `;\n}\n\n/**\n * Creates JavaScript for interactive features\n */\nfunction getJavaScript(): string {\n    return `\n    document.addEventListener('DOMContentLoaded', function() {\n        initializeTabs();\n        initializeCharts();\n        initializeNetworkTables();\n    });\n\n    // Toggle function for collapsible profiler sections\n    function toggleSection(sectionId) {\n        const content = document.getElementById(sectionId);\n        const icon = document.getElementById(sectionId + '-icon');\n        \n        if (content && icon) {\n            if (content.classList.contains('collapsed')) {\n                content.classList.remove('collapsed');\n                icon.textContent = 'â–²';\n            } else {\n                content.classList.add('collapsed');\n                icon.textContent = 'â–¼';\n            }\n        }\n    }\n\n    function initializeTabs() {\n        const tabs = document.querySelectorAll('.nav-tab');\n        const tabContents = document.querySelectorAll('.tab-content');\n        \n        tabs.forEach(tab => {\n            tab.addEventListener('click', function() {\n                const targetTab = this.getAttribute('data-tab');\n                \n                // Remove active class from all tabs and contents\n                tabs.forEach(t => t.classList.remove('active'));\n                tabContents.forEach(content => content.classList.remove('active'));\n                \n                // Add active class to clicked tab and corresponding content\n                this.classList.add('active');\n                const targetContent = document.getElementById(targetTab);\n                if (targetContent) {\n                    targetContent.classList.add('active');\n                }\n            });\n        });\n    }\n\n    function initializeNetworkTables() {\n        // Initialize overview network table\n        const overviewTable = document.querySelector('[id^=\"networkTable-\"]');\n        \n        if (overviewTable && window.dashboardData) {\n            const allRequests = [];\n            window.dashboardData.forEach(report => {\n                if (report.network?.requests) {\n                    allRequests.push(...report.network.requests.map(req => ({\n                        ...req,\n                        urlShortName: (req.url.split('/').pop() || req.url).substring(0, 20) + '...',\n                        sizeFormatted: formatBytes(req.transferSize),\n                        timeFormatted: req.responseTime.toFixed(0) + 'ms',\n                        statusFormatted: 'Success',\n                        priorityFormatted: 'High'\n                    })));\n                }\n            });\n            \n            new Tabulator(overviewTable, {\n                data: allRequests.sort((a, b) => b.responseTime - a.responseTime),\n                layout: \"fitColumns\",\n                pagination: \"local\",\n                paginationSize: 10,\n                paginationSizeSelector: [5, 10, 20, 50],\n                movableColumns: true,\n                resizableRows: true,\n                tooltips: true,\n                theme: \"default\",\n                headerFilterPlaceholder: \"Search...\",\n                placeholder: \"No network requests found\",\n                columns: [\n                    {\n                        title: \"URL Short Name\",\n                        field: \"urlShortName\",\n                        width: 200,\n                        sorter: \"string\",\n                        formatter: function(cell, formatterParams, onRendered) {\n                            return cell.getValue();\n                        }\n                    },\n                    {\n                        title: \"Domain\",\n                        field: \"domain\",\n                        width: 150,\n                        sorter: \"string\"\n                    },\n                    {\n                        title: \"Type\",\n                        field: \"resourceType\",\n                        width: 100,\n                        sorter: \"string\",\n                        formatter: function(cell, formatterParams, onRendered) {\n                            const type = cell.getValue();\n                            return '<span class=\"resource-type ' + type + '\">' + type + '</span>';\n                        }\n                    },\n                    {\n                        title: \"Size\",\n                        field: \"sizeFormatted\",\n                        width: 100,\n                        sorter: \"number\",\n                        sorterParams: {column: \"transferSize\"}\n                    },\n                    {\n                        title: \"Time\",\n                        field: \"timeFormatted\",\n                        width: 100,\n                        sorter: \"number\",\n                        sorterParams: {column: \"responseTime\"}\n                    },\n                    {\n                        title: \"Status\",\n                        field: \"statusFormatted\",\n                        width: 100,\n                        sorter: \"string\",\n                        formatter: function(cell, formatterParams, onRendered) {\n                            return '<span class=\"status-badge status-success\">' + cell.getValue() + '</span>';\n                        }\n                    },\n                    {\n                        title: \"Priority\",\n                        field: \"priorityFormatted\",\n                        width: 100,\n                        sorter: \"string\",\n                        formatter: function(cell, formatterParams, onRendered) {\n                            return '<span class=\"priority-badge priority-high\">' + cell.getValue() + '</span>';\n                        }\n                    },\n                    {\n                        title: \"Actions\",\n                        field: \"actions\",\n                        width: 80,\n                        formatter: function(cell, formatterParams, onRendered) {\n                            return '<button class=\"view-btn\" onclick=\"showNetworkDetailsModal(' + JSON.stringify(cell.getRow().getData()).replace(/\"/g, '&quot;') + ')\">View</button>';\n                        }\n                    }\n                ]\n            });\n        }\n        \n        // Initialize scenario network tables\n        const scenarioTables = document.querySelectorAll('[id^=\"scenarioNetworkTable-\"]');\n        \n        scenarioTables.forEach((table, index) => {\n            if (window.dashboardData && window.dashboardData[index]?.network?.requests) {\n                const requests = window.dashboardData[index].network.requests.map(req => ({\n                    ...req,\n                    urlShortName: (req.url.split('/').pop() || req.url).substring(0, 20) + '...',\n                    sizeFormatted: formatBytes(req.transferSize),\n                    timeFormatted: req.responseTime.toFixed(0) + 'ms',\n                    statusFormatted: 'Success',\n                    priorityFormatted: 'High'\n                }));\n                \n                new Tabulator(table, {\n                    data: requests,\n                    layout: \"fitColumns\",\n                    pagination: \"local\",\n                    paginationSize: 10,\n                    paginationSizeSelector: [5, 10, 20, 50],\n                    movableColumns: true,\n                    resizableRows: false,\n                    tooltips: true,\n                    theme: \"default\",\n                    headerFilterPlaceholder: \"Search...\",\n                    placeholder: \"No network requests found\",\n\n                    columns: [\n                        {\n                            title: \"URL Short Name\",\n                            field: \"urlShortName\",\n                            width: 200,\n                            sorter: \"string\",\n                            formatter: function(cell, formatterParams, onRendered) {\n                                return cell.getValue();\n                            }\n                        },\n                        {\n                            title: \"Domain\",\n                            field: \"domain\",\n                            width: 150,\n                            sorter: \"string\"\n                        },\n                        {\n                            title: \"Type\",\n                            field: \"resourceType\",\n                            width: 100,\n                            sorter: \"string\",\n                            formatter: function(cell, formatterParams, onRendered) {\n                                const type = cell.getValue();\n                                return '<span class=\"resource-type ' + type + '\">' + type + '</span>';\n                            }\n                        },\n                        {\n                            title: \"Size\",\n                            field: \"sizeFormatted\",\n                            width: 100,\n                            sorter: \"number\",\n                            sorterParams: {column: \"transferSize\"}\n                        },\n                        {\n                            title: \"Time\",\n                            field: \"timeFormatted\",\n                            width: 100,\n                            sorter: \"number\",\n                            sorterParams: {column: \"responseTime\"}\n                        },\n                        {\n                            title: \"Status\",\n                            field: \"statusFormatted\",\n                            width: 100,\n                            sorter: \"string\",\n                            formatter: function(cell, formatterParams, onRendered) {\n                                return '<span class=\"status-badge status-success\">' + cell.getValue() + '</span>';\n                            }\n                        },\n                        {\n                            title: \"Priority\",\n                            field: \"priorityFormatted\",\n                            width: 100,\n                            sorter: \"string\",\n                            formatter: function(cell, formatterParams, onRendered) {\n                                return '<span class=\"priority-badge priority-high\">' + cell.getValue() + '</span>';\n                            }\n                        },\n                        {\n                            title: \"Actions\",\n                            field: \"actions\",\n                            width: 80,\n                            formatter: function(cell, formatterParams, onRendered) {\n                                return '<button class=\"view-btn\" onclick=\"showNetworkDetailsModal(' + JSON.stringify(cell.getRow().getData()).replace(/\"/g, '&quot;') + ')\">View</button>';\n                            }\n                        }\n                    ],\n\n                });\n            }\n        });\n    }\n    \n    function showNetworkDetailsModal(requestData) {\n        // Remove any existing modal\n        const existingModal = document.querySelector('.network-details-modal');\n        if (existingModal) {\n            existingModal.remove();\n        }\n        \n        const modal = document.createElement('div');\n        modal.className = 'network-details-modal';\n        modal.innerHTML = \\`\n            <div class=\"modal-backdrop\" onclick=\"this.parentElement.remove()\"></div>\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h3>Network Request Details</h3>\n                    <button onclick=\"this.closest('.network-details-modal').remove()\">Ã—</button>\n                </div>\n                <div class=\"modal-body\">\n                    \\${createNetworkRequestDetailsHTML(requestData)}\n                </div>\n            </div>\n        \\`;\n        document.body.appendChild(modal);\n        \n        // Add escape key listener\n        const handleEscape = function(e) {\n            if (e.key === 'Escape') {\n                modal.remove();\n                document.removeEventListener('keydown', handleEscape);\n            }\n        };\n        document.addEventListener('keydown', handleEscape);\n    }\n    \n    function showNetworkDetails(requestData) {\n        showNetworkDetailsModal(requestData);\n    }\n    \n    function createNetworkRequestDetailsHTML(request) {\n        const timing = request.timing || {};\n        const headers = request.headers || {};\n        \n        return \\`\n            <div class=\"network-details\">\n                <div class=\"detail-card\">\n                    <div class=\"detail-label\">Full URL</div>\n                    <div class=\"detail-value\">\\${request.url}</div>\n                </div>\n                <div class=\"detail-card\">\n                    <div class=\"detail-label\">Method</div>\n                    <div class=\"detail-value\">\\${request.method || 'GET'}</div>\n                </div>\n                <div class=\"detail-card\">\n                    <div class=\"detail-label\">Status Code</div>\n                    <div class=\"detail-value\">\\${request.status || 'N/A'}</div>\n                </div>\n                <div class=\"detail-card\">\n                    <div class=\"detail-label\">Domain</div>\n                    <div class=\"detail-value\">\\${request.domain || 'N/A'}</div>\n                </div>\n                <div class=\"detail-card\">\n                    <div class=\"detail-label\">Protocol</div>\n                    <div class=\"detail-value\">\\${request.protocol || 'N/A'}</div>\n                </div>\n                <div class=\"detail-card\">\n                    <div class=\"detail-label\">Cache Status</div>\n                    <div class=\"detail-value\">\\${request.cacheStatus || 'N/A'}</div>\n                </div>\n                <div class=\"detail-card\">\n                    <div class=\"detail-label\">Transfer Size</div>\n                    <div class=\"detail-value\">\\${formatBytes(request.transferSize || 0)}</div>\n                </div>\n                <div class=\"detail-card\">\n                    <div class=\"detail-label\">Encoded Size</div>\n                    <div class=\"detail-value\">\\${formatBytes(request.encodedBodySize || 0)}</div>\n                </div>\n                \\${request.connection ? \\`\n                <div class=\"detail-card\">\n                    <div class=\"detail-label\">Remote IP</div>\n                    <div class=\"detail-value\">\\${request.connection.remoteIP}:\\${request.connection.remotePort}</div>\n                </div>\n                \\` : ''}\n                \\${request.security ? \\`\n                <div class=\"detail-card\">\n                    <div class=\"detail-label\">Security State</div>\n                    <div class=\"detail-value\">\\${request.security.state}</div>\n                </div>\n                \\` : ''}\n            </div>\n            \n            <div class=\"timing-breakdown\">\n                <h4>Timing Breakdown</h4>\n                <div class=\"timing-grid\">\n                    <div class=\"timing-card \\${timing.dnsLookup > 0 ? '' : 'timing-unavailable'}\">\n                        <div class=\"timing-label\">DNS Lookup</div>\n                        <div class=\"timing-value\">\\${timing.dnsLookup > 0 ? timing.dnsLookup.toFixed(2) + 'ms' : 'N/A'}</div>\n                        \\${timing.dnsLookup === 0 ? '<div class=\"timing-note\">Connection reused</div>' : ''}\n                    </div>\n                    <div class=\"timing-card \\${timing.tcpConnect > 0 ? '' : 'timing-unavailable'}\">\n                        <div class=\"timing-label\">TCP Connect</div>\n                        <div class=\"timing-value\">\\${timing.tcpConnect > 0 ? timing.tcpConnect.toFixed(2) + 'ms' : 'N/A'}</div>\n                        \\${timing.tcpConnect === 0 ? '<div class=\"timing-note\">Connection reused</div>' : ''}\n                    </div>\n                    <div class=\"timing-card \\${timing.sslHandshake > 0 ? '' : 'timing-unavailable'}\">\n                        <div class=\"timing-label\">SSL Handshake</div>\n                        <div class=\"timing-value\">\\${timing.sslHandshake > 0 ? timing.sslHandshake.toFixed(2) + 'ms' : 'N/A'}</div>\n                        \\${timing.sslHandshake === 0 ? '<div class=\"timing-note\">HTTP or reused</div>' : ''}\n                    </div>\n                    <div class=\"timing-card \\${timing.requestSend > 0 ? '' : 'timing-unavailable'}\">\n                        <div class=\"timing-label\">Request Send</div>\n                        <div class=\"timing-value\">\\${timing.requestSend > 0 ? timing.requestSend.toFixed(2) + 'ms' : 'N/A'}</div>\n                        \\${timing.requestSend === 0 ? '<div class=\"timing-note\">Cached or fast</div>' : ''}\n                    </div>\n                    <div class=\"timing-card \\${timing.waitTime > 0 ? '' : 'timing-unavailable'}\">\n                        <div class=\"timing-label\">Server Wait</div>\n                        <div class=\"timing-value\">\\${timing.waitTime > 0 ? timing.waitTime.toFixed(2) + 'ms' : 'N/A'}</div>\n                        \\${timing.waitTime === 0 ? '<div class=\"timing-note\">Instant response</div>' : ''}\n                    </div>\n                    <div class=\"timing-card \\${timing.responseReceive > 0 ? '' : 'timing-unavailable'}\">\n                        <div class=\"timing-label\">Response Receive</div>\n                        <div class=\"timing-value\">\\${timing.responseReceive > 0 ? timing.responseReceive.toFixed(2) + 'ms' : 'N/A'}</div>\n                        \\${timing.responseReceive === 0 ? '<div class=\"timing-note\">Small payload</div>' : ''}\n                    </div>\n                    <div class=\"timing-card \\${timing.contentDownloadTime > 0 ? '' : 'timing-unavailable'}\">\n                        <div class=\"timing-label\">Content Download</div>\n                        <div class=\"timing-value\">\\${timing.contentDownloadTime > 0 ? timing.contentDownloadTime.toFixed(2) + 'ms' : 'N/A'}</div>\n                        \\${timing.contentDownloadTime === 0 ? '<div class=\"timing-note\">Headers only</div>' : ''}\n                    </div>\n                    \\${timing.redirectTime > 0 ? \\`\n                    <div class=\"timing-card\">\n                        <div class=\"timing-label\">Redirect Time</div>\n                        <div class=\"timing-value\">\\${timing.redirectTime.toFixed(2)}ms</div>\n                    </div>\n                    \\` : ''}\n                    <div class=\"timing-card\" style=\"border: 2px solid #3b82f6; background: #f0f9ff;\">\n                        <div class=\"timing-label\" style=\"color: #1e40af; font-weight: 600;\">Total Time</div>\n                        <div class=\"timing-value\" style=\"color: #1e40af; font-weight: 700; font-size: 1rem;\">\\${(request.responseTime || 0).toFixed(2)}ms</div>\n                    </div>\n                    \\${timing.timingSum && Math.abs(timing.totalTime - timing.timingSum) > 1 ? \\`\n                    <div class=\"timing-card\" style=\"border: 2px solid \\${timing.timingSum > timing.totalTime ? '#dc2626' : '#f59e0b'}; background: \\${timing.timingSum > timing.totalTime ? '#fef2f2' : '#fffbeb'};\">\n                        <div class=\"timing-label\" style=\"color: \\${timing.timingSum > timing.totalTime ? '#dc2626' : '#92400e'}; font-weight: 600;\">Timing Sum</div>\n                        <div class=\"timing-value\" style=\"color: \\${timing.timingSum > timing.totalTime ? '#dc2626' : '#92400e'}; font-weight: 700; font-size: 1rem;\">\\${timing.timingSum.toFixed(2)}ms</div>\n                        <div class=\"timing-note\" style=\"color: \\${timing.timingSum > timing.totalTime ? '#dc2626' : '#92400e'}; margin-top: 0.25rem; font-size: 0.7rem;\">\n                            \\${timing.timingSum > timing.totalTime ? 'Overlapping operations' : 'Sum of breakdown components'}\n                        </div>\n                    </div>\n                    \\` : ''}\n                </div>\n                \\${timing.fromCache ? '<div class=\"cache-notice\">ðŸ“¦ This resource was served from cache</div>' : ''}\n                \\${timing.connectionReused ? '<div class=\"connection-notice\">ðŸ”„ Connection was reused (faster)</div>' : ''}\n                \\${timing.timingSum && Math.abs(timing.totalTime - timing.timingSum) > 1 ? \\`\n                <div class=\"timing-discrepancy-notice\">\n                    \\${timing.timingSum > timing.totalTime ? \\`\n                        âš ï¸ Timing discrepancy: Timing sum (\\${timing.timingSum.toFixed(2)}ms) > Total time (\\${timing.totalTime.toFixed(2)}ms). \n                        This indicates overlapping network operations or concurrent requests that share connection setup time.\n                    \\` : \\`\n                        âš ï¸ Timing discrepancy: Total time (\\${timing.totalTime.toFixed(2)}ms) includes response body download time, \n                        while breakdown sum (\\${timing.timingSum.toFixed(2)}ms) only includes headers received time.\n                    \\`}\n                </div>\n                \\` : ''}\n            </div>\n            \n            \\${request.headers ? \\`\n            <div class=\"headers-section\">\n                <h4>Request & Response Headers</h4>\n                <div class=\"headers-grid\">\n                    <div class=\"headers-card\">\n                        <h5>Request Headers</h5>\n                        <div class=\"headers-list\">\n                            \\${Object.entries(request.headers.request || {}).map(([key, value]) => \\`\n                                <div class=\"header-item\">\n                                    <span class=\"header-key\">\\${key}:</span>\n                                    <span class=\"header-value\">\\${value}</span>\n                                </div>\n                            \\`).join('')}\n                        </div>\n                    </div>\n                    <div class=\"headers-card\">\n                        <h5>Response Headers</h5>\n                        <div class=\"headers-list\">\n                            \\${Object.entries(request.headers.response || {}).map(([key, value]) => \\`\n                                <div class=\"header-item\">\n                                    <span class=\"header-key\">\\${key}:</span>\n                                    <span class=\"header-value\">\\${value}</span>\n                                </div>\n                            \\`).join('')}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \\` : ''}\n            \n            \\${request.security?.details ? \\`\n            <div class=\"security-section\">\n                <h4>Security Details</h4>\n                <div class=\"security-grid\">\n                    <div class=\"security-card\">\n                        <div class=\"security-label\">Protocol</div>\n                        <div class=\"security-value\">\\${request.security.details.protocol}</div>\n                    </div>\n                    <div class=\"security-card\">\n                        <div class=\"security-label\">Cipher</div>\n                        <div class=\"security-value\">\\${request.security.details.cipher}</div>\n                    </div>\n                    <div class=\"security-card\">\n                        <div class=\"security-label\">Certificate Subject</div>\n                        <div class=\"security-value\">\\${request.security.details.subjectName}</div>\n                    </div>\n                    <div class=\"security-card\">\n                        <div class=\"security-label\">Issuer</div>\n                        <div class=\"security-value\">\\${request.security.details.issuer}</div>\n                    </div>\n                </div>\n            </div>\n            \\` : ''}\n        \\`;\n    }\n    \n    function formatBytes(bytes) {\n        if (bytes === 0) return '0 B';\n        const k = 1024;\n        const sizes = ['B', 'KB', 'MB', 'GB'];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    }\n\n    function initializeNetworkRows() {\n        const networkRows = document.querySelectorAll('.network-row');\n        \n        networkRows.forEach(row => {\n            row.addEventListener('click', function() {\n                const index = this.getAttribute('data-index');\n                const expandableRow = document.querySelector(\\`.expandable-row[data-index=\"\\${index}\"]\\`);\n                const expandIcon = this.querySelector('.expand-icon');\n                \n                if (expandableRow && expandIcon) {\n                    const isExpanded = expandableRow.classList.contains('active');\n                    \n                    if (isExpanded) {\n                        // Collapse\n                        expandableRow.classList.remove('active');\n                        this.classList.remove('expanded');\n                        expandIcon.classList.remove('expanded');\n                        expandIcon.textContent = 'â–¶';\n                    } else {\n                        // Expand\n                        expandableRow.classList.add('active');\n                        this.classList.add('expanded');\n                        expandIcon.classList.add('expanded');\n                        expandIcon.textContent = 'â–¼';\n                    }\n                }\n            });\n        });\n    }\n\n    function initializeCharts() {\n        // Initialize any charts that need to be rendered\n        const chartContainers = document.querySelectorAll('.chart-container');\n        \n        chartContainers.forEach(container => {\n            const canvas = container.querySelector('canvas');\n            if (!canvas) return;\n            \n            const ctx = canvas.getContext('2d');\n            const data = JSON.parse(canvas.dataset.chartData || '{}');\n            \n            if (Object.keys(data).length > 0) {\n                new Chart(ctx, {\n                    type: 'doughnut',\n                    data: {\n                        labels: Object.keys(data),\n                        datasets: [{\n                            data: Object.values(data),\n                            backgroundColor: [\n                                '#3b82f6',\n                                '#10b981',\n                                '#f59e0b',\n                                '#ef4444',\n                                '#8b5cf6',\n                                '#06b6d4'\n                            ],\n                            borderWidth: 0\n                        }]\n                    },\n                    options: {\n                        responsive: true,\n                        maintainAspectRatio: false,\n                        plugins: {\n                            legend: {\n                                position: 'bottom',\n                                labels: {\n                                    padding: 20,\n                                    usePointStyle: true\n                                }\n                            }\n                        }\n                    }\n                });\n            }\n        });\n    }\n  `;\n}\n\n/**\n * Calculates overall performance score\n */\nfunction calculateOverallScore(reports: WebVitalsReport[]): number {\n    if (reports.length === 0) return 0;\n    \n    let totalScore = 0;\n    let validReports = 0;\n    \n    reports.forEach(report => {\n        const score = calculateScenarioScore(report);\n        if (score > 0) {\n            totalScore += score;\n            validReports++;\n        }\n    });\n    \n    return validReports > 0 ? Math.round(totalScore / validReports) : 0;\n}\n\n/**\n * Calculates score for a single scenario\n */\nfunction calculateScenarioScore(report: WebVitalsReport): number {\n    const metrics = report.metrics;\n    if (!metrics) return 0;\n    \n    let score = 0;\n    let validMetrics = 0;\n    \n    // FCP scoring (0-25 points)\n    if (metrics.FCP !== undefined) {\n        if (metrics.FCP <= 1800) score += 25;\n        else if (metrics.FCP <= 3000) score += 15;\n        else if (metrics.FCP <= 4000) score += 5;\n        validMetrics++;\n    }\n    \n    // LCP scoring (0-25 points)\n    if (metrics.LCP !== undefined) {\n        if (metrics.LCP <= 2500) score += 25;\n        else if (metrics.LCP <= 4000) score += 15;\n        else if (metrics.LCP <= 5000) score += 5;\n        validMetrics++;\n    }\n    \n    // CLS scoring (0-25 points)\n    if (metrics.CLS !== undefined) {\n        if (metrics.CLS <= 0.1) score += 25;\n        else if (metrics.CLS <= 0.25) score += 15;\n        else if (metrics.CLS <= 0.4) score += 5;\n        validMetrics++;\n    }\n    \n    // INP scoring (0-25 points)\n    if (metrics.INP !== undefined) {\n        if (metrics.INP <= 200) score += 25;\n        else if (metrics.INP <= 500) score += 15;\n        else if (metrics.INP <= 1000) score += 5;\n        validMetrics++;\n    }\n    \n    return validMetrics > 0 ? Math.round((score / (validMetrics * 25)) * 100) : 0;\n}\n\n/**\n * Gets score label based on score value\n */\nfunction getScoreLabel(score: number): string {\n    if (score >= 90) return 'Excellent';\n    if (score >= 75) return 'Good';\n    if (score >= 50) return 'Needs Improvement';\n    return 'Poor';\n}\n\n/**\n * Creates overview content\n */\nfunction createOverviewContent(reports: WebVitalsReport[]): string {\n    return `\n        <!-- Performance Scores by Scenario -->\n        <div class=\"performance-scores\">\n            <h2 class=\"section-title\">Performance Scores by Scenario</h2>\n            <div class=\"scores-grid\">\n                ${reports.map(report => {\n                    const score = calculateScenarioScore(report);\n                    const status = getScoreLabel(score);\n                    const statusClass = status.toLowerCase().replace(' ', '-');\n                    return `\n                        <div class=\"score-card ${statusClass}\">\n                            <div class=\"score-card-value\">${score}</div>\n                            <div class=\"score-card-label\">${report.scenario}</div>\n                            <div class=\"score-card-status ${statusClass}\">${status}</div>\n                        </div>\n                    `;\n                }).join('')}\n            </div>\n        </div>\n\n        <!-- Core Web Vitals Comparison -->\n        <div class=\"core-web-vitals\">\n            <h2 class=\"section-title\">Core Web Vitals Comparison</h2>\n        <div class=\"vitals-grid\">\n            ${createVitalCard('First Contentful Paint', 'FCP', reports, 'Time when first text or image is painted', '1800ms')}\n            ${createVitalCard('Largest Contentful Paint', 'LCP', reports, 'Time when largest content element is painted', '2500ms')}\n            ${createVitalCard('Cumulative Layout Shift', 'CLS', reports, 'Visual stability of the page', '0.1')}\n            ${createVitalCard('Time to First Byte', 'TTFB', reports, 'Time between request and first byte received', '600ms')}\n        </div>\n        </div>\n\n        <!-- Content Grid -->\n        <div class=\"content-grid\">\n            ${createNetworkAnalysisSection(reports)}\n            ${createJavaScriptProfilerSection(reports)}\n        </div>\n\n        <!-- Performance Summary -->\n        <div class=\"performance-summary\">\n            ${createSummaryCard('Total Size', calculateTotalSize(reports) + ' MB')}\n            ${createSummaryCard('Load Time', calculateAverageLoadTime(reports) + 'ms')}\n            ${createSummaryCard('Requests', calculateTotalRequests(reports).toString())}\n            ${createSummaryCard('JS Execution', calculateAverageJSExecution(reports) + 'ms')}\n        </div>\n    `;\n}\n\n/**\n * Creates individual scenario content\n */\nfunction createScenarioContent(report: WebVitalsReport, index: number): string {\n    const score = calculateScenarioScore(report);\n    const status = getScoreLabel(score);\n    \n    return `\n        <!-- Scenario Header -->\n        <div class=\"performance-scores\">\n            <h2 class=\"section-title\">Performance Summary - ${report.scenario}</h2>\n            <div class=\"scores-grid\">\n                <div class=\"score-card ${status.toLowerCase().replace(' ', '-')}\">\n                    <div class=\"score-card-value\">${score}</div>\n                    <div class=\"score-card-label\">Scenario Score</div>\n                    <div class=\"score-card-status ${status.toLowerCase().replace(' ', '-')}\">${status}</div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Core Web Vitals for this scenario -->\n        <div class=\"core-web-vitals\">\n            <h2 class=\"section-title\">Core Web Vitals</h2>\n            <div class=\"vitals-grid\">\n                ${createSingleVitalCard('First Contentful Paint', report.metrics?.FCP, 'Time when first text or image is painted', '1800ms')}\n                ${createSingleVitalCard('Largest Contentful Paint', report.metrics?.LCP, 'Time when largest content element is painted', '2500ms')}\n                ${createSingleVitalCard('Cumulative Layout Shift', report.metrics?.CLS, 'Visual stability of the page', '0.1')}\n                ${createSingleVitalCard('Time to First Byte', report.metrics?.TTFB, 'Time between request and first byte received', '600ms')}\n            </div>\n        </div>\n\n        <!-- Content Grid -->\n        <div class=\"content-grid\">\n            ${createScenarioNetworkAnalysis(report)}\n            ${createScenarioJavaScriptProfiler(report)}\n        </div>\n\n        <!-- Performance Summary for this scenario -->\n        <div class=\"performance-summary\">\n            ${createSummaryCard('Total Size', formatBytes(report.network?.summary?.totalTransferSize || 0))}\n            ${createSummaryCard('Load Time', (report.performance?.loadTime || 0).toFixed(0) + 'ms')}\n            ${createSummaryCard('Requests', (report.network?.summary?.totalRequests || 0).toString())}\n            ${createSummaryCard('JS Execution', (report.profile?.summary?.totalExecutionTime || 0).toFixed(0) + 'ms')}\n        </div>\n    `;\n}\n\n/**\n * Creates vital card for overview (comparing across scenarios)\n */\nfunction createVitalCard(name: string, metric: string, reports: WebVitalsReport[], description: string, threshold: string): string {\n    const values = reports.map(r => r.metrics?.[metric as keyof typeof r.metrics]).filter(v => v !== undefined);\n    const average = values.length > 0 ? values.reduce((sum, val) => sum + (val as number), 0) / values.length : 0;\n    const status = getVitalStatus(metric, average);\n    \n    // Format value based on metric type\n    const formatValue = (value: number, metric: string): string => {\n        if (metric === 'CLS') {\n            return value.toFixed(3);\n        }\n        return value.toFixed(0) + 'ms';\n    };\n    \n    return `\n        <div class=\"vital-card\">\n            <div class=\"vital-header\">\n                <div class=\"vital-name\">${name}</div>\n                <div class=\"vital-status\">${status}</div>\n            </div>\n            <div class=\"vital-value\">${formatValue(average, metric)}</div>\n            <div class=\"vital-description\">${description}</div>\n        </div>\n    `;\n}\n\n/**\n * Creates vital card for single scenario\n */\nfunction createSingleVitalCard(name: string, value: number | undefined, description: string, threshold: string): string {\n    if (value === undefined) {\n        return `\n            <div class=\"vital-card\">\n                <div class=\"vital-header\">\n                    <div class=\"vital-name\">${name}</div>\n                    <div class=\"vital-status\">No Data</div>\n                </div>\n                <div class=\"vital-value\">N/A</div>\n                <div class=\"vital-description\">${description}</div>\n            </div>\n        `;\n    }\n    \n    const metric = name.split(' ')[0];\n    const status = getVitalStatus(metric, value);\n    \n    // Format value based on metric type\n    const formatValue = (value: number, metric: string): string => {\n        if (metric === 'CLS') {\n            return value.toFixed(3);\n        }\n        return value.toFixed(0) + 'ms';\n    };\n    \n    return `\n        <div class=\"vital-card\">\n            <div class=\"vital-header\">\n                <div class=\"vital-name\">${name}</div>\n                <div class=\"vital-status\">${status}</div>\n            </div>\n            <div class=\"vital-value\">${formatValue(value, metric)}</div>\n            <div class=\"vital-description\">${description}</div>\n\n        </div>\n    `;\n}\n\n/**\n * Gets vital status based on metric and value\n */\nfunction getVitalStatus(metric: string, value: number): string {\n    const thresholds = {\n        'FCP': { good: 1800, poor: 3000 },\n        'LCP': { good: 2500, poor: 4000 },\n        'CLS': { good: 0.1, poor: 0.25 },\n        'INP': { good: 200, poor: 500 },\n        'TTFB': { good: 600, poor: 1200 }\n    };\n    \n    const threshold = thresholds[metric as keyof typeof thresholds];\n    if (!threshold) return 'Good';\n    \n    if (value <= threshold.good) return 'Good';\n    if (value <= threshold.poor) return 'Needs Improvement';\n    return 'Poor';\n}\n\n/**\n * Creates network analysis section for overview\n */\nfunction createNetworkAnalysisSection(reports: WebVitalsReport[]): string {\n    const totalRequests = reports.reduce((sum, r) => sum + (r.network?.summary?.totalRequests || 0), 0);\n    const totalSize = reports.reduce((sum, r) => sum + (r.network?.summary?.totalTransferSize || 0), 0);\n    const avgResponseTime = reports.reduce((sum, r) => sum + (r.network?.summary?.averageResponseTime || 0), 0) / reports.length;\n    \n    return `\n        <div class=\"network-analysis\">\n            <div class=\"section-header\">\n                <h3>Network Request Analysis</h3>\n                <div class=\"section-summary\">\n                    <span>Total Requests: ${totalRequests}</span>\n                    <span>Total Size: ${formatBytes(totalSize)}</span>\n                    <span>Load Time: ${avgResponseTime.toFixed(0)}ms</span>\n                </div>\n            </div>\n            <div class=\"network-content\">\n                <div id=\"networkTable-${Date.now()}\"></div>\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Creates JavaScript profiler section for overview\n */\nfunction createJavaScriptProfilerSection(reports: WebVitalsReport[]): string {\n  const totalExecutionTime = reports.reduce((sum, r) => sum + (r.profile?.summary?.totalExecutionTime || 0), 0);\n  const totalFunctions = reports.reduce((sum, r) => sum + (r.profile?.summary?.totalFunctions || 0), 0);\n  const totalCalls = reports.reduce((sum, r) => sum + (r.profile?.summary?.totalCalls || 0), 0);\n  const avgJsExecutionPercentage = reports.reduce((sum, r) => sum + (r.profile?.summary?.executionEfficiency?.jsExecutionPercentage || 0), 0) / reports.length;\n  const avgIdleTimePercentage = reports.reduce((sum, r) => sum + (r.profile?.summary?.executionEfficiency?.idleTimePercentage || 0), 0) / reports.length;\n  \n  return `\n    <div class=\"js-profiler\">\n      <div class=\"section-header\">\n        <h3>JavaScript Profiler Analysis</h3>\n        <div class=\"section-summary\">\n          <span>Total execution time: ${totalExecutionTime.toFixed(0)}ms</span>\n          <span>JS execution: ${avgJsExecutionPercentage.toFixed(1)}% of profiler time</span>\n          <span>Idle time: ${avgIdleTimePercentage.toFixed(1)}%</span>\n        </div>\n      </div>\n      <div class=\"profiler-content\">\n        <!-- Top 10 Most Expensive Functions -->\n        <div class=\"profiler-section\">\n          <div class=\"profiler-section-header\" onclick=\"toggleSection('overview-top-functions')\">\n            <h4>Top 10 Most Expensive Functions</h4>\n            <span class=\"toggle-icon\" id=\"overview-top-functions-icon\">â–¼</span>\n          </div>\n          <div class=\"profiler-section-content collapsed\" id=\"overview-top-functions\">\n            <div class=\"function-list\">\n              ${getTopFunctions(reports).map(func => `\n                <div class=\"function-item\">\n                  <div class=\"function-name\" title=\"${func.source}:${func.line}\">${func.name}()</div>\n                  <div class=\"function-bar\">\n                    <div class=\"function-bar-fill\" style=\"width: ${func.percentage}%\"></div>\n                  </div>\n                  <div class=\"function-time\">\n                    ${func.time.toFixed(0)}ms (${func.percentage.toFixed(1)}%)\n                    <span class=\"function-calls\">${func.calls} calls</span>\n                  </div>\n                </div>\n              `).join('')}\n            </div>\n          </div>\n        </div>\n\n        <!-- Third-Party Script Impact -->\n        <div class=\"profiler-section\">\n          <div class=\"profiler-section-header\" onclick=\"toggleSection('overview-third-party')\">\n            <h4>Third-Party Script Impact</h4>\n            <span class=\"toggle-icon\" id=\"overview-third-party-icon\">â–¼</span>\n          </div>\n          <div class=\"profiler-section-content collapsed\" id=\"overview-third-party\">\n            <div class=\"third-party-impact\">\n              ${getThirdPartyImpact(reports).map(script => `\n                <div class=\"third-party-item\">\n                  <div class=\"script-domain\">${script.domain}</div>\n                  <div class=\"script-bar\">\n                    <div class=\"script-bar-fill\" style=\"width: ${script.percentage}%\"></div>\n                  </div>\n                  <div class=\"script-stats\">\n                    ${script.time.toFixed(0)}ms (${script.percentage.toFixed(1)}%)\n                    <span class=\"script-functions\">${script.functions} functions</span>\n                  </div>\n                </div>\n              `).join('')}\n            </div>\n          </div>\n        </div>\n\n        <!-- Function Call Frequency -->\n        <div class=\"profiler-section\">\n          <div class=\"profiler-section-header\" onclick=\"toggleSection('overview-call-frequency')\">\n            <h4>Most Called Functions</h4>\n            <span class=\"toggle-icon\" id=\"overview-call-frequency-icon\">â–¼</span>\n          </div>\n          <div class=\"profiler-section-content collapsed\" id=\"overview-call-frequency\">\n            <div class=\"call-frequency-list\">\n              ${getMostCalledFunctions(reports).map(func => `\n                <div class=\"frequency-item\">\n                  <div class=\"frequency-name\">${func.name}()</div>\n                  <div class=\"frequency-count\">${func.calls} calls</div>\n                  <div class=\"frequency-bar\">\n                    <div class=\"frequency-bar-fill\" style=\"width: ${(func.calls / getMostCalledFunctions(reports)[0]?.calls * 100)}%\"></div>\n                  </div>\n                </div>\n              `).join('')}\n            </div>\n          </div>\n        </div>\n\n        <!-- Thread Blocking Analysis -->\n        <div class=\"profiler-section\">\n          <div class=\"profiler-section-header\" onclick=\"toggleSection('overview-thread-blocking')\">\n            <h4>Thread Blocking Analysis</h4>\n            <span class=\"toggle-icon\" id=\"overview-thread-blocking-icon\">â–¼</span>\n          </div>\n          <div class=\"profiler-section-content collapsed\" id=\"overview-thread-blocking\">\n            <div class=\"thread-blocking-content\">\n              <!-- Top Blocking Events -->\n              <div class=\"blocking-subsection\">\n                <h5>Top Blocking Events</h5>\n                <div class=\"blocking-events-list\">\n                  ${getTopThreadBlockingEvents(reports).map(event => `\n                    <div class=\"blocking-event-item\">\n                      <div class=\"blocking-function\">${event.functionName}()</div>\n                      <div class=\"blocking-severity ${event.severity}\">\n                        <span class=\"severity-badge\">${event.severity.toUpperCase()}</span>\n                        <span class=\"blocking-time\">${event.blockingTime.toFixed(1)}ms</span>\n                      </div>\n                      <div class=\"blocking-details\">\n                        <span class=\"blocking-duration\">${event.startTime.toFixed(1)}ms - ${event.endTime.toFixed(1)}ms</span>\n                      </div>\n                    </div>\n                  `).join('')}\n                </div>\n              </div>\n\n              <!-- Responsiveness Impact -->\n              <div class=\"blocking-subsection\">\n                <h5>Responsiveness Impact</h5>\n                <div class=\"responsiveness-grid\">\n                  <div class=\"responsiveness-metric\">\n                    <div class=\"metric-label\">Responsiveness Score</div>\n                    <div class=\"metric-value\">${getAverageThreadBlockingMetrics(reports).responsivenessScore.toFixed(1)}%</div>\n                  </div>\n                  <div class=\"responsiveness-metric\">\n                    <div class=\"metric-label\">Frame Drops</div>\n                    <div class=\"metric-value\">${getAverageThreadBlockingMetrics(reports).frameDrops.toFixed(0)}</div>\n                  </div>\n                  <div class=\"responsiveness-metric\">\n                    <div class=\"metric-label\">Interaction Delay</div>\n                    <div class=\"metric-value\">${getAverageThreadBlockingMetrics(reports).userInteractionDelay.toFixed(1)}ms</div>\n                  </div>\n                  <div class=\"responsiveness-metric\">\n                    <div class=\"metric-label\">Longest Block</div>\n                    <div class=\"metric-value\">${getAverageThreadBlockingMetrics(reports).longestBlockingEvent.toFixed(1)}ms</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- CPU Usage Analysis -->\n        <div class=\"profiler-section\">\n          <div class=\"profiler-section-header\" onclick=\"toggleSection('overview-cpu-usage')\">\n            <h4>CPU Usage Analysis</h4>\n            <span class=\"toggle-icon\" id=\"overview-cpu-usage-icon\">â–¼</span>\n          </div>\n          <div class=\"profiler-section-content collapsed\" id=\"overview-cpu-usage\">\n            <div class=\"cpu-usage-content\">\n              <!-- Top CPU-Intensive Functions -->\n              <div class=\"cpu-subsection\">\n                <h5>Top CPU-Intensive Functions</h5>\n                <div class=\"cpu-functions-list\">\n                  ${getTopCpuIntensiveFunctions(reports).map(func => `\n                    <div class=\"cpu-function-item\">\n                      <div class=\"cpu-function-name\">${func.functionName}()</div>\n                      <div class=\"cpu-usage-bar\">\n                        <div class=\"cpu-usage-fill\" style=\"width: ${func.cpuPercentage}%\"></div>\n                      </div>\n                      <div class=\"cpu-stats\">\n                        <span class=\"cpu-time\">${func.cpuTime.toFixed(1)}ms</span>\n                        <span class=\"cpu-percentage\">${func.cpuPercentage.toFixed(1)}%</span>\n                        <span class=\"cpu-calls\">${func.calls} calls</span>\n                      </div>\n                    </div>\n                  `).join('')}\n                </div>\n              </div>\n\n              <!-- CPU Efficiency Metrics -->\n              <div class=\"cpu-subsection\">\n                <h5>CPU Efficiency Metrics</h5>\n                <div class=\"cpu-efficiency-grid\">\n                  <div class=\"cpu-metric\">\n                    <div class=\"metric-label\">CPU Utilization Score</div>\n                    <div class=\"metric-value\">${getAverageCpuUsageMetrics(reports).cpuUtilizationScore.toFixed(1)}%</div>\n                  </div>\n                  <div class=\"cpu-metric\">\n                    <div class=\"metric-label\">Average CPU Usage</div>\n                    <div class=\"metric-value\">${getAverageCpuUsageMetrics(reports).averageCpuUsage.toFixed(1)}%</div>\n                  </div>\n                  <div class=\"cpu-metric\">\n                    <div class=\"metric-label\">Peak CPU Usage</div>\n                    <div class=\"metric-value\">${getAverageCpuUsageMetrics(reports).peakCpuUsage.toFixed(1)}%</div>\n                  </div>\n                  <div class=\"cpu-metric\">\n                    <div class=\"metric-label\">CPU Waste</div>\n                    <div class=\"metric-value\">${getAverageCpuUsageMetrics(reports).cpuWastePercentage.toFixed(1)}%</div>\n                  </div>\n                  <div class=\"cpu-metric\">\n                    <div class=\"metric-label\">Optimization Potential</div>\n                    <div class=\"metric-value\">${getAverageCpuUsageMetrics(reports).optimizationPotential.toFixed(1)}%</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"function-chart\">\n          <canvas id=\"functionChart\"></canvas>\n        </div>\n        <div class=\"profiler-stats\">\n          <div class=\"profiler-stat\">\n            <div class=\"profiler-stat-value\">${totalFunctions}</div>\n            <div class=\"profiler-stat-label\">Functions</div>\n          </div>\n          <div class=\"profiler-stat\">\n            <div class=\"profiler-stat-value\">${totalCalls}</div>\n            <div class=\"profiler-stat-label\">Total Calls</div>\n          </div>\n          <div class=\"profiler-stat\">\n            <div class=\"profiler-stat-value\">${getLongestFunction(reports).time.toFixed(0)}ms</div>\n            <div class=\"profiler-stat-label\">Longest Function</div>\n          </div>\n          <div class=\"profiler-stat\">\n            <div class=\"profiler-stat-value\">${avgJsExecutionPercentage.toFixed(1)}%</div>\n            <div class=\"profiler-stat-label\">JS Execution</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Creates network analysis for single scenario\n */\nfunction createScenarioNetworkAnalysis(report: WebVitalsReport): string {\n    const network = report.network;\n    if (!network || !network.requests.length) {\n        return `\n            <div class=\"network-analysis\">\n                <div class=\"section-header\">\n                    <h3>Network Request Analysis</h3>\n                </div>\n                <div class=\"network-content\">\n                    <p>No network data available</p>\n                </div>\n            </div>\n        `;\n    }\n    \n    return `\n        <div class=\"network-analysis\">\n            <div class=\"section-header\">\n                <h3>Network Request Analysis</h3>\n                <div class=\"section-summary\">\n                    <span>Total Requests: ${network.summary.totalRequests}</span>\n                    <span>Total Size: ${formatBytes(network.summary.totalTransferSize)}</span>\n                    <span>Load Time: ${network.summary.averageResponseTime.toFixed(0)}ms</span>\n                </div>\n            </div>\n            <div class=\"network-content\">\n                <div id=\"scenarioNetworkTable-${Date.now()}\"></div>\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Creates JavaScript profiler for single scenario\n */\nfunction createScenarioJavaScriptProfiler(report: WebVitalsReport): string {\n  const profile = report.profile;\n  if (!profile || !profile.summary) {\n    return `\n      <div class=\"js-profiler\">\n        <div class=\"section-header\">\n          <h3>JavaScript Profiler</h3>\n        </div>\n        <div class=\"profiler-content\">\n          <p>No profile data available</p>\n        </div>\n      </div>\n    `;\n  }\n  \n  return `\n    <div class=\"js-profiler\">\n      <div class=\"section-header\">\n        <h3>JavaScript Profiler Analysis</h3>\n        <div class=\"section-summary\">\n          <span>Total execution time: ${profile.summary.totalExecutionTime.toFixed(0)}ms</span>\n          <span>JS execution: ${profile.summary.executionEfficiency?.jsExecutionPercentage?.toFixed(1) || 0}% of load time</span>\n          <span>Idle time: ${profile.summary.executionEfficiency?.idleTimePercentage?.toFixed(1) || 0}%</span>\n        </div>\n      </div>\n      <div class=\"profiler-content\">\n        <!-- Top 10 Most Expensive Functions -->\n        <div class=\"profiler-section\">\n          <div class=\"profiler-section-header\" onclick=\"toggleSection('scenario-top-functions')\">\n            <h4>Top 10 Most Expensive Functions</h4>\n            <span class=\"toggle-icon\" id=\"scenario-top-functions-icon\">â–¼</span>\n          </div>\n          <div class=\"profiler-section-content collapsed\" id=\"scenario-top-functions\">\n            <div class=\"function-list\">\n              ${(profile.summary.topFunctions || []).map(func => `\n                <div class=\"function-item\">\n                  <div class=\"function-name\" title=\"${func.source}:${func.line}\">${func.name}()</div>\n                  <div class=\"function-bar\">\n                    <div class=\"function-bar-fill\" style=\"width: ${func.percentage}%\"></div>\n                  </div>\n                  <div class=\"function-time\">\n                    ${func.time.toFixed(0)}ms (${func.percentage.toFixed(1)}%)\n                    <span class=\"function-calls\">${func.calls} calls</span>\n                  </div>\n                </div>\n              `).join('')}\n            </div>\n          </div>\n        </div>\n\n        <!-- Third-Party Script Impact -->\n        <div class=\"profiler-section\">\n          <div class=\"profiler-section-header\" onclick=\"toggleSection('scenario-third-party')\">\n            <h4>Third-Party Script Impact</h4>\n            <span class=\"toggle-icon\" id=\"scenario-third-party-icon\">â–¼</span>\n          </div>\n          <div class=\"profiler-section-content collapsed\" id=\"scenario-third-party\">\n            <div class=\"third-party-impact\">\n              ${profile.summary.thirdPartyImpact?.scripts?.map(script => `\n                <div class=\"third-party-item\">\n                  <div class=\"script-domain\">${script.domain}</div>\n                  <div class=\"script-bar\">\n                    <div class=\"script-bar-fill\" style=\"width: ${script.percentage}%\"></div>\n                  </div>\n                  <div class=\"script-stats\">\n                    ${script.time.toFixed(0)}ms (${script.percentage.toFixed(1)}%)\n                    <span class=\"script-functions\">${script.functions} functions</span>\n                  </div>\n                </div>\n              `).join('') || '<p>No third-party scripts detected</p>'}\n            </div>\n          </div>\n        </div>\n\n        <!-- Function Call Frequency -->\n        <div class=\"profiler-section\">\n          <div class=\"profiler-section-header\" onclick=\"toggleSection('scenario-call-frequency')\">\n            <h4>Most Called Functions</h4>\n            <span class=\"toggle-icon\" id=\"scenario-call-frequency-icon\">â–¼</span>\n          </div>\n          <div class=\"profiler-section-content collapsed\" id=\"scenario-call-frequency\">\n            <div class=\"call-frequency-list\">\n              ${Object.entries(profile.summary.functionCallFrequency || {})\n                .sort(([,a], [,b]) => (b as number) - (a as number))\n                .slice(0, 10)\n                .map(([name, calls]) => `\n                  <div class=\"frequency-item\">\n                    <div class=\"frequency-name\">${name}()</div>\n                    <div class=\"frequency-count\">${calls} calls</div>\n                    <div class=\"frequency-bar\">\n                      <div class=\"frequency-bar-fill\" style=\"width: ${(calls as number / Math.max(...Object.values(profile.summary.functionCallFrequency || {}), 1) * 100).toFixed(1)}%\"></div>\n                    </div>\n                  </div>\n                `).join('')}\n            </div>\n          </div>\n        </div>\n\n        <div class=\"function-chart\">\n          <canvas data-chart-data='${JSON.stringify(getFunctionCallData(report))}'></canvas>\n        </div>\n\n        <!-- Thread Blocking Analysis -->\n        <div class=\"profiler-section\">\n          <div class=\"profiler-section-header\" onclick=\"toggleSection('scenario-thread-blocking')\">\n            <h4>Thread Blocking Analysis</h4>\n            <span class=\"toggle-icon\" id=\"scenario-thread-blocking-icon\">â–¼</span>\n          </div>\n          <div class=\"profiler-section-content collapsed\" id=\"scenario-thread-blocking\">\n            <div class=\"thread-blocking-content\">\n              <!-- Top Blocking Events -->\n              <div class=\"blocking-subsection\">\n                <h5>Top Blocking Events</h5>\n                <div class=\"blocking-events-list\">\n                  ${(profile.summary.threadBlockingAnalysis?.blockingEvents || []).slice(0, 5).map(event => `\n                    <div class=\"blocking-event-item\">\n                      <div class=\"blocking-function\">${event.functionName}()</div>\n                      <div class=\"blocking-severity ${event.severity}\">\n                        <span class=\"severity-badge\">${event.severity.toUpperCase()}</span>\n                        <span class=\"blocking-time\">${event.blockingTime.toFixed(1)}ms</span>\n                      </div>\n                      <div class=\"blocking-details\">\n                        <span class=\"blocking-duration\">${event.startTime.toFixed(1)}ms - ${event.endTime.toFixed(1)}ms</span>\n                      </div>\n                    </div>\n                  `).join('')}\n                </div>\n              </div>\n\n              <!-- Responsiveness Impact -->\n              <div class=\"blocking-subsection\">\n                <h5>Responsiveness Impact</h5>\n                <div class=\"responsiveness-grid\">\n                  <div class=\"responsiveness-metric\">\n                    <div class=\"metric-label\">Responsiveness Score</div>\n                    <div class=\"metric-value\">${profile.summary.threadBlockingAnalysis?.responsivenessImpact?.responsivenessScore?.toFixed(1) || 100}%</div>\n                  </div>\n                  <div class=\"responsiveness-metric\">\n                    <div class=\"metric-label\">Frame Drops</div>\n                    <div class=\"metric-value\">${profile.summary.threadBlockingAnalysis?.responsivenessImpact?.frameDrops || 0}</div>\n                  </div>\n                  <div class=\"responsiveness-metric\">\n                    <div class=\"metric-label\">Interaction Delay</div>\n                    <div class=\"metric-value\">${profile.summary.threadBlockingAnalysis?.responsivenessImpact?.userInteractionDelay?.toFixed(1) || 0}ms</div>\n                  </div>\n                  <div class=\"responsiveness-metric\">\n                    <div class=\"metric-label\">Longest Block</div>\n                    <div class=\"metric-value\">${profile.summary.threadBlockingAnalysis?.longestBlockingEvent?.toFixed(1) || 0}ms</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- CPU Usage Analysis -->\n        <div class=\"profiler-section\">\n          <div class=\"profiler-section-header\" onclick=\"toggleSection('scenario-cpu-usage')\">\n            <h4>CPU Usage Analysis</h4>\n            <span class=\"toggle-icon\" id=\"scenario-cpu-usage-icon\">â–¼</span>\n          </div>\n          <div class=\"profiler-section-content collapsed\" id=\"scenario-cpu-usage\">\n            <div class=\"cpu-usage-content\">\n              <!-- Top CPU-Intensive Functions -->\n              <div class=\"cpu-subsection\">\n                <h5>Top CPU-Intensive Functions</h5>\n                <div class=\"cpu-functions-list\">\n                  ${(profile.summary.cpuUsageAnalysis?.cpuIntensiveFunctions || []).slice(0, 5).map(func => `\n                    <div class=\"cpu-function-item\">\n                      <div class=\"cpu-function-name\">${func.functionName}()</div>\n                      <div class=\"cpu-usage-bar\">\n                        <div class=\"cpu-usage-fill\" style=\"width: ${func.cpuPercentage}%\"></div>\n                      </div>\n                      <div class=\"cpu-stats\">\n                        <span class=\"cpu-time\">${func.cpuTime.toFixed(1)}ms</span>\n                        <span class=\"cpu-percentage\">${func.cpuPercentage.toFixed(1)}%</span>\n                        <span class=\"cpu-calls\">${func.calls} calls</span>\n                      </div>\n                    </div>\n                  `).join('')}\n                </div>\n              </div>\n\n              <!-- CPU Efficiency Metrics -->\n              <div class=\"cpu-subsection\">\n                <h5>CPU Efficiency Metrics</h5>\n                <div class=\"cpu-efficiency-grid\">\n                  <div class=\"cpu-metric\">\n                    <div class=\"metric-label\">CPU Utilization Score</div>\n                    <div class=\"metric-value\">${profile.summary.cpuUsageAnalysis?.cpuEfficiency?.cpuUtilizationScore?.toFixed(1) || 100}%</div>\n                  </div>\n                  <div class=\"cpu-metric\">\n                    <div class=\"metric-label\">Average CPU Usage</div>\n                    <div class=\"metric-value\">${profile.summary.cpuUsageAnalysis?.averageCpuUsage?.toFixed(1) || 0}%</div>\n                  </div>\n                  <div class=\"cpu-metric\">\n                    <div class=\"metric-label\">Peak CPU Usage</div>\n                    <div class=\"metric-value\">${profile.summary.cpuUsageAnalysis?.peakCpuUsage?.toFixed(1) || 0}%</div>\n                  </div>\n                  <div class=\"cpu-metric\">\n                    <div class=\"metric-label\">CPU Waste</div>\n                    <div class=\"metric-value\">${profile.summary.cpuUsageAnalysis?.cpuEfficiency?.cpuWastePercentage?.toFixed(1) || 0}%</div>\n                  </div>\n                  <div class=\"cpu-metric\">\n                    <div class=\"metric-label\">Optimization Potential</div>\n                    <div class=\"metric-value\">${profile.summary.cpuUsageAnalysis?.cpuEfficiency?.optimizationPotential?.toFixed(1) || 0}%</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"profiler-stats\">\n          <div class=\"profiler-stat\">\n            <div class=\"profiler-stat-value\">${profile.summary.totalFunctions}</div>\n            <div class=\"profiler-stat-label\">Functions</div>\n          </div>\n          <div class=\"profiler-stat\">\n            <div class=\"profiler-stat-value\">${profile.summary.totalCalls}</div>\n            <div class=\"profiler-stat-label\">Total Calls</div>\n          </div>\n          <div class=\"profiler-stat\">\n            <div class=\"profiler-stat-value\">${profile.summary.longestFunctionTime.toFixed(0)}ms</div>\n            <div class=\"profiler-stat-label\">Longest Function</div>\n          </div>\n          <div class=\"profiler-stat\">\n            <div class=\"profiler-stat-value\">${profile.summary.executionEfficiency?.jsExecutionPercentage?.toFixed(1) || 0}%</div>\n            <div class=\"profiler-stat-label\">JS Execution (of profiler)</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Creates summary card\n */\nfunction createSummaryCard(label: string, value: string): string {\n    return `\n        <div class=\"summary-card\">\n            <div class=\"summary-value\">${value}</div>\n            <div class=\"summary-label\">${label}</div>\n        </div>\n    `;\n}\n\n/**\n * Helper functions for calculations\n */\nfunction calculateTotalSize(reports: WebVitalsReport[]): string {\n    const totalBytes = reports.reduce((sum, r) => sum + (r.network?.summary?.totalTransferSize || 0), 0);\n    return (totalBytes / (1024 * 1024)).toFixed(2);\n}\n\nfunction calculateAverageLoadTime(reports: WebVitalsReport[]): string {\n    const totalTime = reports.reduce((sum, r) => sum + (r.performance?.loadTime || 0), 0);\n    return (totalTime / reports.length).toFixed(0);\n}\n\nfunction calculateTotalRequests(reports: WebVitalsReport[]): number {\n    return reports.reduce((sum, r) => sum + (r.network?.summary?.totalRequests || 0), 0);\n}\n\nfunction calculateAverageJSExecution(reports: WebVitalsReport[]): string {\n    const totalTime = reports.reduce((sum, r) => sum + (r.profile?.summary?.totalExecutionTime || 0), 0);\n    return (totalTime / reports.length).toFixed(0);\n}\n\nfunction getTopNetworkRequests(reports: WebVitalsReport[]): any[] {\n    const allRequests: any[] = [];\n    reports.forEach(report => {\n        if (report.network?.requests) {\n            allRequests.push(...report.network.requests);\n        }\n    });\n    \n    return allRequests\n        .sort((a: any, b: any) => b.responseTime - a.responseTime)\n}\n\nfunction getTopFunctions(reports: WebVitalsReport[], limit: number = 10): any[] {\n  const allFunctions: any[] = [];\n  reports.forEach(report => {\n    if (report.profile?.summary?.topFunctions && Array.isArray(report.profile.summary.topFunctions)) {\n      allFunctions.push(...report.profile.summary.topFunctions);\n    }\n  });\n  \n  // Group by function name and sum the times\n  const functionMap = new Map<string, any>();\n  const totalTime = allFunctions.reduce((sum, f) => sum + f.time, 0);\n  allFunctions.forEach(func => {\n    if (functionMap.has(func.name)) {\n      const existing = functionMap.get(func.name);\n      existing.time += func.time;\n      existing.calls += func.calls;\n      existing.percentage = totalTime > 0 ? (existing.time / totalTime) * 100 : 0;\n    } else {\n      functionMap.set(func.name, { ...func });\n    }\n  });\n  \n  return Array.from(functionMap.values())\n    .sort((a: any, b: any) => b.time - a.time)\n    .slice(0, limit);\n}\n\nfunction getThirdPartyImpact(reports: WebVitalsReport[]): any[] {\n  const allScripts: any[] = [];\n  reports.forEach(report => {\n    if (report.profile?.summary?.thirdPartyImpact?.scripts && Array.isArray(report.profile.summary.thirdPartyImpact.scripts)) {\n      allScripts.push(...report.profile.summary.thirdPartyImpact.scripts);\n    }\n  });\n  \n  // Group by domain and sum the times\n  const scriptMap = new Map<string, any>();\n  const totalScriptTime = allScripts.reduce((sum, s) => sum + s.time, 0);\n  allScripts.forEach(script => {\n    if (scriptMap.has(script.domain)) {\n      const existing = scriptMap.get(script.domain);\n      existing.time += script.time;\n      existing.functions += script.functions;\n      existing.percentage = totalScriptTime > 0 ? (existing.time / totalScriptTime) * 100 : 0;\n    } else {\n      scriptMap.set(script.domain, { ...script });\n    }\n  });\n  \n  return Array.from(scriptMap.values())\n    .sort((a: any, b: any) => b.time - a.time)\n    .slice(0, 5);\n}\n\nfunction getMostCalledFunctions(reports: WebVitalsReport[], limit: number = 10): any[] {\n  const allFunctions: any[] = [];\n  reports.forEach(report => {\n    if (report.profile?.summary?.functionCallFrequency && typeof report.profile.summary.functionCallFrequency === 'object') {\n      Object.entries(report.profile.summary.functionCallFrequency).forEach(([name, calls]) => {\n        allFunctions.push({ name, calls: calls as number });\n      });\n    }\n  });\n  \n  // Group by function name and sum the calls\n  const functionMap = new Map<string, any>();\n  allFunctions.forEach(func => {\n    if (functionMap.has(func.name)) {\n      functionMap.get(func.name).calls += func.calls;\n    } else {\n      functionMap.set(func.name, { ...func });\n    }\n  });\n  \n  return Array.from(functionMap.values())\n    .sort((a: any, b: any) => b.calls - a.calls)\n    .slice(0, limit);\n}\n\nfunction getTopFunctionsForScenario(report: WebVitalsReport, limit: number = 5): any[] {\n    if (!report.profile?.summary?.topFunctions) return [];\n    \n    // topFunctions should already be sorted by time (descending) from generateProfileSummary\n    return report.profile.summary.topFunctions.slice(0, limit);\n}\n\nfunction getLongestFunction(reports: WebVitalsReport[]): any {\n    const allFunctions = getTopFunctions(reports, 1);\n    return allFunctions[0] || { name: 'N/A', time: 0 };\n}\n\nfunction getFunctionCallData(report: WebVitalsReport): Record<string, number> {\n    if (!report.profile?.summary?.functionCallFrequency) return {};\n    return report.profile.summary.functionCallFrequency;\n}\n\nfunction getTopThreadBlockingEvents(reports: WebVitalsReport[], limit: number = 5): any[] {\n  const allEvents: any[] = [];\n  reports.forEach(report => {\n    if (report.profile?.summary?.threadBlockingAnalysis?.blockingEvents && Array.isArray(report.profile.summary.threadBlockingAnalysis.blockingEvents)) {\n      allEvents.push(...report.profile.summary.threadBlockingAnalysis.blockingEvents);\n    }\n  });\n  \n  return allEvents\n    .sort((a: any, b: any) => b.blockingTime - a.blockingTime)\n    .slice(0, limit);\n}\n\nfunction getAverageThreadBlockingMetrics(reports: WebVitalsReport[]): any {\n  const validReports = reports.filter(r => r.profile?.summary?.threadBlockingAnalysis);\n  if (validReports.length === 0) {\n    return {\n      totalBlockingTime: 0,\n      blockingPercentage: 0,\n      longestBlockingEvent: 0,\n      responsivenessScore: 100,\n      frameDrops: 0,\n      userInteractionDelay: 0\n    };\n  }\n  \n  const totalBlockingTime = validReports.reduce((sum, r) => sum + (r.profile?.summary?.threadBlockingAnalysis?.totalBlockingTime || 0), 0);\n  const blockingPercentage = validReports.reduce((sum, r) => sum + (r.profile?.summary?.threadBlockingAnalysis?.blockingPercentage || 0), 0);\n  const longestBlockingEvent = validReports.reduce((sum, r) => sum + (r.profile?.summary?.threadBlockingAnalysis?.longestBlockingEvent || 0), 0);\n  const responsivenessScore = validReports.reduce((sum, r) => sum + (r.profile?.summary?.threadBlockingAnalysis?.responsivenessImpact?.responsivenessScore || 100), 0);\n  const frameDrops = validReports.reduce((sum, r) => sum + (r.profile?.summary?.threadBlockingAnalysis?.responsivenessImpact?.frameDrops || 0), 0);\n  const userInteractionDelay = validReports.reduce((sum, r) => sum + (r.profile?.summary?.threadBlockingAnalysis?.responsivenessImpact?.userInteractionDelay || 0), 0);\n  \n  return {\n    totalBlockingTime: totalBlockingTime / validReports.length,\n    blockingPercentage: blockingPercentage / validReports.length,\n    longestBlockingEvent: longestBlockingEvent / validReports.length,\n    responsivenessScore: responsivenessScore / validReports.length,\n    frameDrops: frameDrops / validReports.length,\n    userInteractionDelay: userInteractionDelay / validReports.length\n  };\n}\n\nfunction getTopCpuIntensiveFunctions(reports: WebVitalsReport[], limit: number = 5): any[] {\n  const allFunctions: any[] = [];\n  reports.forEach(report => {\n    if (report.profile?.summary?.cpuUsageAnalysis?.cpuIntensiveFunctions && Array.isArray(report.profile.summary.cpuUsageAnalysis.cpuIntensiveFunctions)) {\n      allFunctions.push(...report.profile.summary.cpuUsageAnalysis.cpuIntensiveFunctions);\n    }\n  });\n  \n  return allFunctions\n    .sort((a: any, b: any) => b.cpuTime - a.cpuTime)\n    .slice(0, limit);\n}\n\nfunction getAverageCpuUsageMetrics(reports: WebVitalsReport[]): any {\n  const validReports = reports.filter(r => r.profile?.summary?.cpuUsageAnalysis);\n  if (validReports.length === 0) {\n    return {\n      totalCpuTime: 0,\n      averageCpuUsage: 0,\n      peakCpuUsage: 0,\n      cpuUtilizationScore: 100,\n      cpuWastePercentage: 0,\n      optimizationPotential: 0\n    };\n  }\n  \n  const totalCpuTime = validReports.reduce((sum, r) => sum + (r.profile?.summary?.cpuUsageAnalysis?.totalCpuTime || 0), 0);\n  const averageCpuUsage = validReports.reduce((sum, r) => sum + (r.profile?.summary?.cpuUsageAnalysis?.averageCpuUsage || 0), 0);\n  const peakCpuUsage = validReports.reduce((sum, r) => sum + (r.profile?.summary?.cpuUsageAnalysis?.peakCpuUsage || 0), 0);\n  const cpuUtilizationScore = validReports.reduce((sum, r) => sum + (r.profile?.summary?.cpuUsageAnalysis?.cpuEfficiency?.cpuUtilizationScore || 100), 0);\n  const cpuWastePercentage = validReports.reduce((sum, r) => sum + (r.profile?.summary?.cpuUsageAnalysis?.cpuEfficiency?.cpuWastePercentage || 0), 0);\n  const optimizationPotential = validReports.reduce((sum, r) => sum + (r.profile?.summary?.cpuUsageAnalysis?.cpuEfficiency?.optimizationPotential || 0), 0);\n  \n  return {\n    totalCpuTime: totalCpuTime / validReports.length,\n    averageCpuUsage: averageCpuUsage / validReports.length,\n    peakCpuUsage: peakCpuUsage / validReports.length,\n    cpuUtilizationScore: cpuUtilizationScore / validReports.length,\n    cpuWastePercentage: cpuWastePercentage / validReports.length,\n    optimizationPotential: optimizationPotential / validReports.length\n  };\n}\n\n/**\n * Creates detailed network request information\n */\nfunction createNetworkRequestDetails(request: any): string {\n    const timing = request.timing || {};\n    const headers = request.headers || {};\n    \n    return `\n        <div class=\"network-details\">\n            <div class=\"detail-group\">\n                <div class=\"detail-label\">Full URL</div>\n                <div class=\"detail-value\">${request.url}</div>\n            </div>\n            <div class=\"detail-group\">\n                <div class=\"detail-label\">Method</div>\n                <div class=\"detail-value\">${request.method || 'GET'}</div>\n            </div>\n            <div class=\"detail-group\">\n                <div class=\"detail-label\">Status Code</div>\n                <div class=\"detail-value\">${request.status || 'N/A'}</div>\n            </div>\n            <div class=\"detail-group\">\n                <div class=\"detail-label\">Domain</div>\n                <div class=\"detail-value\">${request.domain || 'N/A'}</div>\n            </div>\n            <div class=\"detail-group\">\n                <div class=\"detail-label\">Protocol</div>\n                <div class=\"detail-value\">${request.protocol || 'N/A'}</div>\n            </div>\n            <div class=\"detail-group\">\n                <div class=\"detail-label\">Cache Status</div>\n                <div class=\"detail-value\">${request.cacheStatus || 'N/A'}</div>\n            </div>\n            <div class=\"detail-group\">\n                <div class=\"detail-label\">Transfer Size</div>\n                <div class=\"detail-value\">${formatBytes(request.transferSize || 0)}</div>\n            </div>\n            <div class=\"detail-group\">\n                <div class=\"detail-label\">Encoded Size</div>\n                <div class=\"detail-value\">${formatBytes(request.encodedSize || 0)}</div>\n            </div>\n        </div>\n        \n        <div class=\"timing-breakdown\">\n            <h4 style=\"margin-bottom: 0.5rem; color: #374151; font-size: 0.875rem;\">Timing Breakdown</h4>\n            <div class=\"timing-item\">\n                <span class=\"timing-label\">DNS Lookup</span>\n                <span class=\"timing-value\">${(timing.dnsLookup || 0).toFixed(2)}ms</span>\n            </div>\n            <div class=\"timing-item\">\n                <span class=\"timing-label\">TCP Connect</span>\n                <span class=\"timing-value\">${(timing.tcpConnect || 0).toFixed(2)}ms</span>\n            </div>\n            <div class=\"timing-item\">\n                <span class=\"timing-label\">SSL Handshake</span>\n                <span class=\"timing-value\">${(timing.sslHandshake || 0).toFixed(2)}ms</span>\n            </div>\n            <div class=\"timing-item\">\n                <span class=\"timing-label\">Request Send</span>\n                <span class=\"timing-value\">${(timing.requestSend || 0).toFixed(2)}ms</span>\n            </div>\n            <div class=\"timing-item\">\n                <span class=\"timing-label\">Wait Time</span>\n                <span class=\"timing-value\">${(timing.waitTime || 0).toFixed(2)}ms</span>\n            </div>\n            <div class=\"timing-item\">\n                <span class=\"timing-label\">Response Receive</span>\n                <span class=\"timing-value\">${(timing.responseReceive || 0).toFixed(2)}ms</span>\n            </div>\n            <div class=\"timing-item\" style=\"border-top: 2px solid #e2e8f0; margin-top: 0.5rem; padding-top: 0.5rem;\">\n                <span class=\"timing-label\" style=\"font-weight: 600;\">Total Time</span>\n                <span class=\"timing-value\" style=\"font-weight: 700;\">${(request.responseTime || 0).toFixed(2)}ms</span>\n            </div>\n        </div>\n        \n        ${Object.keys(headers).length > 0 ? `\n            <div class=\"timing-breakdown\" style=\"margin-top: 1rem;\">\n                <h4 style=\"margin-bottom: 0.5rem; color: #374151; font-size: 0.875rem;\">Request Headers</h4>\n                ${Object.entries(headers).map(([key, value]) => `\n                    <div class=\"timing-item\">\n                        <span class=\"timing-label\">${key}</span>\n                        <span class=\"timing-value\" style=\"font-size: 0.75rem;\">${value}</span>\n                    </div>\n                `).join('')}\n            </div>\n        ` : ''}\n    `;\n}\n\n/**\n * Formats bytes to human readable format\n */\nfunction formatBytes(bytes: number): string {\n    if (bytes === 0) return '0 B';\n    \n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    \n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n}\n\n","import type { Page } from 'playwright';\nimport type { WebVitalsReport, NetworkRequest, NetworkSummary } from '../types';\n\n/**\n * Install Web Vitals collectors at the earliest script time.\n * Call BEFORE navigation to capture FCP/LCP from the initial load.\n */\nexport async function startVitalsObservation(\n  page: Page,\n  options?: { usePerformanceObserver?: boolean }\n): Promise<void> {\n  const useObserver = options?.usePerformanceObserver ?? true;\n\n  // For web-vitals package, we'll load it after navigation but before steps\n  if (!useObserver) {\n    // Just initialize the results object for now\n    const initScript = `\n      (function(){\n        if (window.__wvg && window.__wvg.started) return;\n        window.__wvg = { started: true, results: {}, packageLoaded: false };\n      })();\n    `;\n    await page.addInitScript({ content: initScript });\n    return;\n  }\n\n  const initScript = `\n    (function(){\n      if (window.__wvg && window.__wvg.started) return;\n      window.__wvg = { started: true, results: {}, observers: [] };\n      try {\n        // FCP\n        try {\n          const fcpObs = new PerformanceObserver((list) => {\n            const entries = list.getEntries();\n            const fcp = entries.find(e => e.name === 'first-contentful-paint');\n            if (fcp) { window.__wvg.results.FCP = fcp.startTime; }\n          });\n          fcpObs.observe({ entryTypes: ['paint'] });\n          window.__wvg.observers.push(fcpObs);\n        } catch {}\n\n        // LCP\n        try {\n          const lcpObs = new PerformanceObserver((list) => {\n            const entries = list.getEntries();\n            const last = entries[entries.length - 1];\n            if (last) { window.__wvg.results.LCP = last.startTime; }\n          });\n          lcpObs.observe({ entryTypes: ['largest-contentful-paint'] });\n          window.__wvg.observers.push(lcpObs);\n        } catch {}\n\n        // CLS\n        try {\n          let cls = 0;\n          const clsObs = new PerformanceObserver((list) => {\n            for (const entry of list.getEntries()) {\n              if (!entry.hadRecentInput) { cls += (entry).value || 0; }\n            }\n            window.__wvg.results.CLS = cls;\n          });\n          clsObs.observe({ entryTypes: ['layout-shift'] });\n          window.__wvg.observers.push(clsObs);\n        } catch {}\n\n        // INP (simplified event delay aggregation)\n        try {\n          let maxDelay = 0;\n          const inpObs = new PerformanceObserver((list) => {\n            for (const entry of list.getEntries()) {\n              const ps = (entry).processingStart;\n              const st = entry.startTime;\n              if (ps && st) { maxDelay = Math.max(maxDelay, ps - st); }\n            }\n            window.__wvg.results.INP = maxDelay;\n          });\n          inpObs.observe({ entryTypes: ['event'] });\n          window.__wvg.observers.push(inpObs);\n        } catch {}\n      } catch {}\n    })();\n  `;\n  await page.addInitScript({ content: initScript });\n}\n\n/**\n * Load web-vitals package and register metrics (for package approach)\n * Call AFTER navigation but BEFORE scenario steps\n */\nexport async function loadWebVitalsPackage(page: Page): Promise<void> {\n  try {\n    // Load the web-vitals package\n    await page.addScriptTag({\n      url: 'https://unpkg.com/web-vitals@3/dist/web-vitals.attribution.iife.js'\n    });\n    \n    // Wait a moment for the script to load\n    await page.waitForTimeout(1000);\n    \n    // Register all metrics\n    await page.evaluate(() => {\n      if ((window as any)['webVitals'] && (window as any).__wvg) {\n        const wv = (window as any)['webVitals'];\n        (window as any).__wvg.packageLoaded = true;\n        \n        // Register all metrics\n        wv.onFCP((metric: any) => { \n          (window as any).__wvg.results.FCP = metric.value; \n          console.log('FCP measured (web-vitals package):', metric.value);\n        });\n        wv.onLCP((metric: any) => { \n          (window as any).__wvg.results.LCP = metric.value; \n          console.log('LCP measured (web-vitals package):', metric.value);\n        });\n        wv.onCLS((metric: any) => { \n          (window as any).__wvg.results.CLS = metric.value; \n          console.log('CLS measured (web-vitals package):', metric.value);\n        });\n        wv.onINP((metric: any) => { \n          (window as any).__wvg.results.INP = metric.value; \n          console.log('INP measured (web-vitals package):', metric.value);\n        });\n      }\n    });\n    \n    console.log('âœ… Web-vitals package loaded and metrics registered');\n  } catch (error) {\n    console.warn('âš ï¸  Failed to load web-vitals package:', error);\n  }\n}\n\n/**\n * Disconnect observers and collect measured metrics.\n * Call AFTER scenario steps and a short settle delay.\n */\nexport async function collectVitals(page: Page): Promise<WebVitalsReport['metrics']> {\n  const results = await page.evaluate(() => {\n    const out: any = (window as any).__wvg?.results ? { ...(window as any).__wvg.results } : {};\n    \n    // Add TTFB from Navigation Timing API\n    try {\n      const nav = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming;\n      if (nav) {\n        out.TTFB = nav.responseStart - nav.requestStart;\n      }\n    } catch {}\n    \n    // Cleanup observers (for PerformanceObserver approach)\n    try {\n      if ((window as any).__wvg?.observers) {\n        for (const obs of (window as any).__wvg.observers) { \n          try { obs.disconnect(); } catch {} \n        }\n      }\n    } catch {}\n    \n    // Reset state\n    try {\n      if ((window as any).__wvg) {\n        (window as any).__wvg.started = false;\n      }\n    } catch {}\n    \n    return out;\n  });\n  return results as WebVitalsReport['metrics'];\n}\n\n/**\n * Measures Web Vitals metrics using PerformanceObserver (no external dependencies)\n * @param page - Playwright page instance\n * @returns Promise resolving to Web Vitals metrics\n */\nexport async function measureWebVitalsWithObserver(page: Page): Promise<WebVitalsReport['metrics']> {\n  const metrics: WebVitalsReport['metrics'] = {};\n  \n  try {\n    const results = await page.evaluate(() => {\n      return new Promise<WebVitalsReport['metrics']>((resolve) => {\n        const results: WebVitalsReport['metrics'] = {};\n        let resolved = false;\n        \n        // Timeout after 10 seconds to prevent hanging\n        const timeout = setTimeout(() => {\n          if (!resolved) {\n            resolved = true;\n            resolve(results);\n          }\n        }, 10000);\n        \n        // Helper function to resolve once\n        const resolveOnce = (value: WebVitalsReport['metrics']) => {\n          if (!resolved) {\n            resolved = true;\n            clearTimeout(timeout);\n            resolve(value);\n          }\n        };\n        \n        // Track metrics collected\n        let metricsCollected = 0;\n        const totalMetrics = 4; // FCP, LCP, CLS, INP\n        \n        const checkComplete = () => {\n          metricsCollected++;\n          if (metricsCollected >= totalMetrics && !resolved) {\n            resolveOnce(results);\n          }\n        };\n        \n        // 1. First Contentful Paint (FCP)\n        try {\n          const fcpObserver = new PerformanceObserver((list) => {\n            const entries = list.getEntries();\n            const fcpEntry = entries.find(entry => entry.name === 'first-contentful-paint');\n            if (fcpEntry) {\n              results.FCP = fcpEntry.startTime;\n              console.log('FCP measured (PerformanceObserver):', fcpEntry.startTime);\n              fcpObserver.disconnect();\n              checkComplete();\n            }\n          });\n          fcpObserver.observe({ entryTypes: ['paint'] });\n        } catch (e) {\n          console.warn('FCP PerformanceObserver failed:', e);\n          checkComplete();\n        }\n        \n        // 2. Largest Contentful Paint (LCP)\n        try {\n          const lcpObserver = new PerformanceObserver((list) => {\n            const entries = list.getEntries();\n            const lastEntry = entries[entries.length - 1];\n            if (lastEntry) {\n              results.LCP = lastEntry.startTime;\n              console.log('LCP measured (PerformanceObserver):', lastEntry.startTime);\n            }\n          });\n          lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] });\n          \n          // LCP can change, so we wait a bit before finalizing\n          setTimeout(() => {\n            lcpObserver.disconnect();\n            checkComplete();\n          }, 2000);\n        } catch (e) {\n          console.warn('LCP PerformanceObserver failed:', e);\n          checkComplete();\n        }\n        \n        // 3. Cumulative Layout Shift (CLS)\n        try {\n          let clsValue = 0;\n          const clsObserver = new PerformanceObserver((list) => {\n            for (const entry of list.getEntries()) {\n              if (!(entry as any).hadRecentInput) {\n                clsValue += (entry as any).value;\n              }\n            }\n            results.CLS = clsValue;\n            console.log('CLS measured (PerformanceObserver):', clsValue);\n          });\n          clsObserver.observe({ entryTypes: ['layout-shift'] });\n          \n          // CLS measurement continues until page unload, so we wait\n          setTimeout(() => {\n            clsObserver.disconnect();\n            checkComplete();\n          }, 3000);\n        } catch (e) {\n          console.warn('CLS PerformanceObserver failed:', e);\n          checkComplete();\n        }\n        \n        // 4. Interaction to Next Paint (INP) - simplified version\n        try {\n          let maxInteractionDelay = 0;\n          const inpObserver = new PerformanceObserver((list) => {\n            for (const entry of list.getEntries()) {\n              const processingStart = (entry as any).processingStart;\n              const startTime = entry.startTime;\n              if (processingStart && startTime) {\n                const delay = processingStart - startTime;\n                maxInteractionDelay = Math.max(maxInteractionDelay, delay);\n              }\n            }\n            results.INP = maxInteractionDelay;\n            console.log('INP measured (PerformanceObserver):', maxInteractionDelay);\n          });\n          inpObserver.observe({ entryTypes: ['event'] });\n          \n          // Wait for interactions to settle\n          setTimeout(() => {\n            inpObserver.disconnect();\n            checkComplete();\n          }, 2000);\n        } catch (e) {\n          console.warn('INP PerformanceObserver failed:', e);\n          checkComplete();\n        }\n        \n        // 5. Time to First Byte (TTFB) - using Navigation Timing\n        try {\n          const navigation = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming;\n          if (navigation) {\n            results.TTFB = navigation.responseStart - navigation.requestStart;\n            console.log('TTFB measured (PerformanceObserver):', results.TTFB);\n          }\n        } catch (e) {\n          console.warn('TTFB measurement failed:', e);\n          // TTFB is optional, don't fail if not available\n        }\n      });\n    });\n    \n    // Merge results\n    Object.assign(metrics, results);\n    \n  } catch (error) {\n    console.warn('Warning: Could not measure Web Vitals with PerformanceObserver:', error);\n  }\n  \n  return metrics;\n}\n\n/**\n * Measures Web Vitals metrics on a page with CSP-safe fallback\n * @param page - Playwright page instance\n * @param options - Configuration options for Web Vitals measurement\n * @returns Promise resolving to Web Vitals metrics\n */\nexport async function measureWebVitals(\n  page: Page, \n  options?: { usePerformanceObserver?: boolean }\n): Promise<WebVitalsReport['metrics']> {\n  const useObserver = options?.usePerformanceObserver ?? true; // Default to PerformanceObserver\n  \n  // Use PerformanceObserver by default (was working fine previously)\n  if (useObserver) {\n    console.log('ðŸ” Measuring Web Vitals with PerformanceObserver...');\n    return measureWebVitalsWithObserver(page);\n  } else {\n    try {\n      console.log('ðŸ“¦ Measuring Web Vitals with web-vitals package...');\n      return measureWebVitalsWithPackage(page);\n    } catch (error) {\n      console.warn('âš ï¸  web-vitals package failed, falling back to PerformanceObserver');\n      return measureWebVitalsWithObserver(page);\n    }\n  }\n  return {};\n}\n\n/**\n * Original web-vitals package implementation (for fallback)\n */\nasync function measureWebVitalsWithPackage(page: Page): Promise<WebVitalsReport['metrics']> {\n  const metrics: WebVitalsReport['metrics'] = {};\n  \n  try {\n    // Inject Web Vitals measurement script\n    await page.addScriptTag({\n      url: 'https://unpkg.com/web-vitals@3/dist/web-vitals.attribution.iife.js'\n    });\n    \n    // Wait a moment for the script to load\n    await page.waitForTimeout(1000);\n    \n    // Measure all Web Vitals metrics together with proper timing\n    const allMetrics = await page.evaluate(() => {\n      return new Promise<WebVitalsReport['metrics']>((resolve) => {\n        const results: WebVitalsReport['metrics'] = {};\n        let metricsCollected = 0;\n        const totalMetrics = 4; // FCP, LCP, CLS, INP\n        \n        // Timeout after 15 seconds\n        const timeout = setTimeout(() => {\n          resolve(results);\n        }, 15000);\n        \n        const checkComplete = () => {\n          metricsCollected++;\n          if (metricsCollected >= totalMetrics) {\n            clearTimeout(timeout);\n            resolve(results);\n          }\n        };\n        \n        // Check if web-vitals is available\n        if (!('webVitals' in window)) {\n          console.warn('webVitals library not loaded');\n          clearTimeout(timeout);\n          resolve(results);\n          return;\n        }\n        \n        const webVitals = (window as any)['webVitals'];\n        \n        // Measure FCP (First Contentful Paint)\n        try {\n          webVitals.onFCP((metric: any) => {\n            results.FCP = metric.value;\n            console.log('FCP measured:', metric.value);\n            checkComplete();\n          });\n        } catch (e) {\n          console.warn('FCP measurement failed:', e);\n          checkComplete();\n        }\n        \n        // Measure LCP (Largest Contentful Paint)\n        try {\n          webVitals.onLCP((metric: any) => {\n            results.LCP = metric.value;\n            console.log('LCP measured:', metric.value);\n            checkComplete();\n          });\n        } catch (e) {\n          console.warn('LCP measurement failed:', e);\n          checkComplete();\n        }\n        \n        // Measure CLS (Cumulative Layout Shift)\n        try {\n          webVitals.onCLS((metric: any) => {\n            results.CLS = metric.value;\n            console.log('CLS measured:', metric.value);\n            checkComplete();\n          });\n        } catch (e) {\n          console.warn('CLS measurement failed:', e);\n          checkComplete();\n        }\n        \n        // Measure INP (Interaction to Next Paint)\n        try {\n          webVitals.onINP((metric: any) => {\n            results.INP = metric.value;\n            console.log('INP measured:', metric.value);\n            checkComplete();\n          });\n        } catch (e) {\n          console.warn('INP measurement failed:', e);\n          checkComplete();\n        }\n        \n        // Measure TTFB (Time to First Byte) using Performance API\n        try {\n          const navigation = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming;\n          if (navigation) {\n            results.TTFB = navigation.responseStart - navigation.requestStart;\n            console.log('TTFB measured:', results.TTFB);\n          }\n        } catch (e) {\n          console.warn('TTFB measurement failed:', e);\n        }\n      });\n    });\n    \n    // Merge results\n    Object.assign(metrics, allMetrics);\n    \n    console.log('âœ… Successfully measured Web Vitals with web-vitals package:', metrics);\n    \n  } catch (error) {\n    console.warn('Warning: Could not measure some Web Vitals with package:', error);\n    throw error; // Re-throw to trigger fallback\n  }\n  \n  return metrics;\n}\n\n/**\n * Measures additional performance metrics using the Performance API\n * @param page - Playwright page instance\n * @returns Promise resolving to performance metrics\n */\nexport async function measurePerformanceMetrics(page: Page): Promise<WebVitalsReport['performance']> {\n  const performanceMetrics = await page.evaluate((): WebVitalsReport['performance'] => {\n    const navigation = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming;\n    const paint = performance.getEntriesByType('paint') as PerformanceEntry[];\n    \n    return {\n      loadTime: navigation ? navigation.loadEventEnd - navigation.fetchStart : 0,\n      domContentLoaded: navigation ? navigation.domContentLoadedEventEnd - navigation.fetchStart : 0,\n      firstPaint: paint.find((entry: PerformanceEntry) => entry.name === 'first-paint')?.startTime || 0\n    };\n  });\n  \n  return performanceMetrics;\n}\n\n\n\n/**\n * Measures network requests using the Performance API\n * @param page - Playwright page instance\n * @returns Promise resolving to network request data\n */\nexport async function measureNetworkRequests(page: Page, cdpSession?: any): Promise<WebVitalsReport['network']> {\n  // Use CDP Network domain for comprehensive network analysis\n  if (!cdpSession) {\n    // Fallback to Performance API if no CDP session provided\n    return await measureNetworkRequestsFallback(page);\n  }\n  \n  // Wait for page to load completely\n  await page.waitForLoadState('networkidle');\n  \n  // Get the collected network data from the CDP session\n  const networkRequests = (cdpSession as any).networkRequests;\n  const networkResponses = (cdpSession as any).networkResponses;\n  const loadingFinished = (cdpSession as any).loadingFinished;\n  \n  // Process collected network data\n  const requests: NetworkRequest[] = [];\n  \n  for (const [requestId, request] of networkRequests) {\n    const response = networkResponses.get(requestId);\n    const finished = loadingFinished.get(requestId);\n    \n    if (response) {\n      const url = new URL(request.url);\n      const domain = url.hostname;\n      const protocol = url.protocol.replace(':', '');\n      \n      // Calculate timing from CDP data\n      const timing = response.timing || {};\n      \n      // CDP timing values are in milliseconds relative to the request start\n      // Use the actual wall clock time for total response time\n      const responseTime = finished?.timestamp ? \n        (finished.timestamp - request.timestamp) * 1000 : \n        (timing.receiveHeadersEnd || 0);\n      \n      // Calculate the sum of all timing components for verification\n      const dnsLookup = Math.max(0, (timing.dnsEnd || 0) - (timing.dnsStart || 0));\n      const tcpConnect = Math.max(0, (timing.connectEnd || 0) - (timing.connectStart || 0));\n      const sslHandshake = Math.max(0, (timing.sslEnd || 0) - (timing.sslStart || 0));\n      const requestSend = Math.max(0, (timing.sendEnd || 0) - (timing.sendStart || 0));\n      const waitTime = Math.max(0, (timing.receiveHeadersEnd || 0) - (timing.sendEnd || 0));\n      const responseReceive = Math.max(0, (timing.receiveHeadersEnd || 0) - (timing.receiveHeadersStart || 0));\n      const redirectTime = Math.max(0, (timing.redirectEnd || 0) - (timing.redirectStart || 0));\n      \n      // Calculate content download time (time from headers received to response finished)\n      const contentDownloadTime = finished?.timestamp ? \n        Math.max(0, (finished.timestamp - request.timestamp) * 1000 - (timing.receiveHeadersEnd || 0)) : 0;\n      \n      // The sum of timing components should match the total time\n      const timingSum = dnsLookup + tcpConnect + sslHandshake + requestSend + waitTime + responseReceive + redirectTime + contentDownloadTime;\n      \n      requests.push({\n        url: request.url,\n        method: request.method,\n        status: response.status,\n        statusText: response.statusText,\n        responseTime: responseTime,\n        transferSize: finished?.encodedDataLength || 0,\n        encodedBodySize: response.encodedDataLength || 0,\n        decodedBodySize: response.encodedDataLength || 0, // CDP doesn't provide decoded size\n        startTime: request.timestamp || 0,\n        endTime: finished?.timestamp || request.timestamp,\n        duration: responseTime,\n        resourceType: request.type || 'other',\n        fromCache: response.fromDiskCache || response.fromPrefetchCache || false,\n        protocol,\n        domain,\n        // Enhanced timing from CDP\n        timing: {\n          dnsLookup: dnsLookup,\n          tcpConnect: tcpConnect,\n          sslHandshake: sslHandshake,\n          requestSend: requestSend,\n          waitTime: waitTime,\n          responseReceive: responseReceive,\n          redirectTime: redirectTime,\n          contentDownloadTime: contentDownloadTime, // Time to download response body\n          totalTime: responseTime, // Use the actual wall clock time\n          timingSum: timingSum, // Sum of all timing components\n          fromCache: response.fromDiskCache || response.fromPrefetchCache || false,\n          connectionReused: response.connectionReused || false\n        },\n        // Additional CDP data\n        headers: {\n          request: request.headers,\n          response: response.headers\n        },\n        security: {\n          state: response.securityState,\n          details: response.securityDetails\n        },\n        connection: {\n          id: response.connectionId,\n          remoteIP: response.remoteIPAddress,\n          remotePort: response.remotePort,\n          reused: response.connectionReused\n        },\n        initiator: request.initiator,\n        redirectChain: request.redirectResponse ? [request.redirectResponse] : []\n      });\n    }\n  }\n  \n  // Calculate summary statistics\n  const summary: NetworkSummary = {\n    totalRequests: requests.length,\n    totalTransferSize: requests.reduce((sum, req) => sum + req.transferSize, 0),\n    totalEncodedSize: requests.reduce((sum, req) => sum + req.encodedBodySize, 0),\n    totalDecodedSize: requests.reduce((sum, req) => sum + req.decodedBodySize, 0),\n    averageResponseTime: requests.length > 0 \n      ? requests.reduce((sum, req) => sum + req.responseTime, 0) / requests.length \n      : 0,\n    slowestRequest: requests.length > 0 \n      ? requests.reduce((slowest, req) => req.responseTime > slowest.responseTime ? req : slowest)\n      : null,\n    failedRequests: requests.filter(req => req.status >= 400).length,\n    requestsByType: {},\n    requestsByDomain: {}\n  };\n\n  // Count requests by type and domain\n  requests.forEach(req => {\n    summary.requestsByType[req.resourceType] = (summary.requestsByType[req.resourceType] || 0) + 1;\n    summary.requestsByDomain[req.domain] = (summary.requestsByDomain[req.domain] || 0) + 1;\n  });\n\n  // CDP session cleanup is handled by the caller\n\n  return {\n    requests,\n    summary\n  };\n}\n\n// Fallback function using Performance API\nasync function measureNetworkRequestsFallback(page: Page): Promise<WebVitalsReport['network']> {\n  const performanceData = await page.evaluate((): WebVitalsReport['network'] => {\n\n    /**\n * Helper function to determine resource type from URL\n */\nfunction getResourceType(url: string): string {\n  const extension = url.split('.').pop()?.toLowerCase();\n  const pathname = new URL(url).pathname.toLowerCase();\n  \n  if (pathname.includes('/api/') || pathname.includes('/graphql')) {\n    return 'api';\n  }\n  \n  switch (extension) {\n    case 'js':\n      return 'script';\n    case 'css':\n      return 'stylesheet';\n    case 'png':\n    case 'jpg':\n    case 'jpeg':\n    case 'gif':\n    case 'svg':\n    case 'webp':\n    case 'ico':\n      return 'image';\n    case 'woff':\n    case 'woff2':\n    case 'ttf':\n    case 'otf':\n      return 'font';\n    case 'mp4':\n    case 'webm':\n    case 'ogg':\n      return 'media';\n    case 'json':\n      return 'json';\n    case 'xml':\n      return 'xml';\n    default:\n      return 'other';\n  }\n}\n\n    const entries = performance.getEntriesByType('resource') as PerformanceResourceTiming[];\n    \n    const requests: NetworkRequest[] = entries.map(entry => {\n      const url = new URL(entry.name);\n      const domain = url.hostname;\n      const protocol = url.protocol.replace(':', '');\n      \n      return {\n        url: entry.name,\n        method: 'GET', // Performance API doesn't provide method, defaulting to GET\n        status: 200, // Performance API doesn't provide status, defaulting to 200\n        statusText: 'OK',\n        responseTime: entry.responseEnd - entry.responseStart,\n        transferSize: entry.transferSize || 0,\n        encodedBodySize: entry.encodedBodySize || 0,\n        decodedBodySize: entry.decodedBodySize || 0,\n        startTime: entry.startTime,\n        endTime: entry.responseEnd,\n        duration: entry.duration,\n        resourceType: getResourceType(entry.name),\n        fromCache: entry.transferSize === 0 && entry.encodedBodySize > 0,\n        protocol,\n        domain,\n        timing: {\n          dnsLookup: Math.max(0, entry.domainLookupEnd - entry.domainLookupStart),\n          tcpConnect: Math.max(0, entry.connectEnd - entry.connectStart),\n          sslHandshake: entry.secureConnectionStart > 0 ? Math.max(0, entry.connectEnd - entry.secureConnectionStart) : 0,\n          requestSend: Math.max(0, entry.responseStart - entry.requestStart),\n          waitTime: Math.max(0, entry.responseStart - entry.requestStart),\n          responseReceive: Math.max(0, entry.responseEnd - entry.responseStart),\n          // Additional timing data\n          redirectTime: Math.max(0, entry.redirectEnd - entry.redirectStart),\n          contentDownloadTime: Math.max(0, entry.responseEnd - entry.responseStart), // Performance API doesn't distinguish this\n          totalTime: Math.max(0, entry.responseEnd - entry.startTime),\n          timingSum: Math.max(0, entry.responseEnd - entry.startTime), // Same as totalTime for Performance API\n          // Cache timing\n          fromCache: entry.transferSize === 0 && entry.encodedBodySize > 0,\n          // Connection reuse\n          connectionReused: entry.connectStart === 0 && entry.connectEnd === 0\n        }\n      };\n    });\n\n    // Calculate summary statistics\n    const summary: NetworkSummary = {\n      totalRequests: requests.length,\n      totalTransferSize: requests.reduce((sum, req) => sum + req.transferSize, 0),\n      totalEncodedSize: requests.reduce((sum, req) => sum + req.encodedBodySize, 0),\n      totalDecodedSize: requests.reduce((sum, req) => sum + req.decodedBodySize, 0),\n      averageResponseTime: requests.length > 0 \n        ? requests.reduce((sum, req) => sum + req.responseTime, 0) / requests.length \n        : 0,\n      slowestRequest: requests.length > 0 \n        ? requests.reduce((slowest, req) => req.responseTime > slowest.responseTime ? req : slowest)\n        : null,\n      failedRequests: requests.filter(req => req.status >= 400).length,\n      requestsByType: {},\n      requestsByDomain: {}\n    };\n\n    // Count requests by type and domain\n    requests.forEach(req => {\n      summary.requestsByType[req.resourceType] = (summary.requestsByType[req.resourceType] || 0) + 1;\n      summary.requestsByDomain[req.domain] = (summary.requestsByDomain[req.domain] || 0) + 1;\n    });\n\n    return {\n      requests,\n      summary\n    };\n  });\n\n  return performanceData;\n}\n\n// Set up CDP network monitoring before navigation\nexport async function setupCDPNetworkMonitoring(page: Page): Promise<any> {\n  try {\n    const cdpSession = await page.context().newCDPSession(page);\n    await cdpSession.send('Network.enable');\n    \n    // Store network requests and responses\n    const networkRequests = new Map();\n    const networkResponses = new Map();\n    const loadingFinished = new Map();\n    \n    // Listen to network events\n    cdpSession.on('Network.requestWillBeSent', (params: any) => {\n      const requestId = params.requestId;\n      networkRequests.set(requestId, {\n        requestId,\n        url: params.request.url,\n        method: params.request.method,\n        headers: params.request.headers,\n        postData: params.request.postData,\n        timestamp: params.timestamp,\n        wallTime: params.wallTime,\n        initiator: params.initiator,\n        redirectResponse: params.redirectResponse,\n        type: params.type,\n        frameId: params.frameId,\n        hasUserGesture: params.hasUserGesture,\n        documentURL: params.documentURL,\n        loaderId: params.loaderId\n      });\n    });\n    \n    cdpSession.on('Network.responseReceived', (params: any) => {\n      const requestId = params.requestId;\n      networkResponses.set(requestId, {\n        requestId,\n        url: params.response.url,\n        status: params.response.status,\n        statusText: params.response.statusText,\n        headers: params.response.headers,\n        mimeType: params.response.mimeType,\n        connectionReused: params.response.connectionReused,\n        connectionId: params.response.connectionId,\n        remoteIPAddress: params.response.remoteIPAddress,\n        remotePort: params.response.remotePort,\n        fromDiskCache: params.response.fromDiskCache,\n        fromServiceWorker: params.response.fromServiceWorker,\n        fromPrefetchCache: params.response.fromPrefetchCache,\n        encodedDataLength: params.response.encodedDataLength,\n        timing: params.response.timing,\n        responseTime: params.timestamp,\n        protocol: params.response.protocol,\n        securityState: params.response.securityState,\n        securityDetails: params.response.securityDetails\n      });\n    });\n    \n    cdpSession.on('Network.loadingFinished', (params: any) => {\n      const requestId = params.requestId;\n      loadingFinished.set(requestId, {\n        requestId,\n        timestamp: params.timestamp,\n        encodedDataLength: params.encodedDataLength,\n        shouldReportCorbBlocking: false\n      });\n    });\n    \n    // Store the data maps on the session for later retrieval\n    (cdpSession as any).networkRequests = networkRequests;\n    (cdpSession as any).networkResponses = networkResponses;\n    (cdpSession as any).loadingFinished = loadingFinished;\n    \n    return cdpSession;\n  } catch (error) {\n    console.warn('âš ï¸  Failed to set up CDP network monitoring:', error);\n    return null;\n  }\n}\n\n// Enhanced main function with error handling\nexport async function measureNetworkRequestsEnhanced(page: Page, cdpSession?: any): Promise<WebVitalsReport['network']> {\n  try {\n    // Try CDP first for comprehensive data\n    return await measureNetworkRequests(page, cdpSession);\n  } catch (error) {\n    console.warn('âš ï¸  CDP Network analysis failed, falling back to Performance API:', error);\n    return await measureNetworkRequestsFallback(page);\n  }\n}\n","// helper/profile-js.ts\nimport type { Page } from '@playwright/test';\n\nexport async function profileJs<T>(page: Page, run: () => Promise<T>) {\n  const cdp = await page.context().newCDPSession(page);\n  await cdp.send('Profiler.enable');\n  await cdp.send('Profiler.start');           // sampling profiler\n  let error;\n  try { await run(); } catch (e) { error = e; }\n  const { profile } = await cdp.send('Profiler.stop');\n  await cdp.send('Profiler.disable');\n  return { profile, error };\n}\n","import type { Browser, Page } from 'playwright';\nimport type { ScenarioStep, ScenarioFile, WebVitalsReport, GuardianConfig } from '../types';\nimport { measureWebVitals, measurePerformanceMetrics, measureNetworkRequestsEnhanced, setupCDPNetworkMonitoring, startVitalsObservation, collectVitals, loadWebVitalsPackage } from '../measurements/webVitals';\nimport { profileJs } from '../measurements/performanceObserver';\nimport { generateProfileSummary } from '../utils/profileAnalyzer';\n\n/**\n * Executes a single scenario step\n * @param page - Playwright page instance\n * @param step - Scenario step to execute\n * @throws Error if step execution fails\n */\nexport async function executeScenarioStep(page: Page, step: ScenarioStep): Promise<void> {\n  const timeout = step.timeout || 30000;\n  \n  switch (step.type) {\n    case 'navigate':\n      if (!step.url) {\n        throw new Error('Navigate step requires a URL');\n      }\n      await page.goto(step.url, { waitUntil: 'networkidle', timeout });\n      break;\n      \n    case 'click':\n      if (!step.selector) {\n        throw new Error('Click step requires a selector');\n      }\n      await page.click(step.selector, { timeout });\n      break;\n      \n    case 'type':\n      if (!step.selector || !step.text) {\n        throw new Error('Type step requires a selector and text');\n      }\n      await page.fill(step.selector, step.text, { timeout });\n      break;\n      \n    case 'wait':\n      if (step.waitFor) {\n        await page.waitForSelector(step.waitFor, { timeout });\n      } else {\n        await page.waitForTimeout(step.timeout || 1000);\n      }\n      break;\n      \n    case 'scroll':\n      await page.evaluate(() => {\n        window.scrollTo(0, document.body.scrollHeight);\n      });\n      break;\n      \n    case 'hover':\n      if (!step.selector) {\n        throw new Error('Hover step requires a selector');\n      }\n      await page.hover(step.selector, { timeout });\n      break;\n      \n    default:\n      throw new Error(`Unknown step type: ${step.type}`);\n  }\n}\n\nasync function runProfile(page: Page, scenario: ScenarioFile): Promise<void> {\n    for (const step of scenario.steps) {\n      await executeScenarioStep(page, step);\n    }\n}\n\n/**\n * Runs a complete scenario and measures Web Vitals\n * @param browser - Playwright browser instance\n * @param scenario - Scenario configuration\n * @param config - Guardian configuration (for Web Vitals options)\n * @returns Promise resolving to Web Vitals report\n */\nexport async function runScenario(browser: Browser, scenario: ScenarioFile, config?: GuardianConfig): Promise<WebVitalsReport> {\n  \n  const context = await browser.newContext({bypassCSP: true});\n  const page = await context.newPage();\n  \n  try {\n    // Navigate to the initial URL\n    \n    \n    // Start Web Vitals observation BEFORE navigation\n    await startVitalsObservation(page, config?.webVitals);\n    \n    // Set up CDP network monitoring before navigation\n    const cdpSession = await setupCDPNetworkMonitoring(page);\n    \n    // Navigate to the initial URL\n    await page.goto(scenario.url, { waitUntil: 'networkidle' });\n    \n    // Load web-vitals package if needed (after navigation, before steps)\n    if (config?.webVitals?.usePerformanceObserver === false) {\n      await loadWebVitalsPackage(page);\n    }\n    let profileResponse = null;\n    if (config?.enableProfile) {\n      profileResponse = await profileJs(page, () => runProfile(page, scenario));\n    } else {\n      await runProfile(page, scenario);\n    }\n\n    \n    // Wait a bit for any final interactions to settle\n    await page.waitForTimeout(2000);\n    \n    const webVitals = await collectVitals(page);\n    const performance = await measurePerformanceMetrics(page);\n    const network = await measureNetworkRequestsEnhanced(page, cdpSession);\n\n    // Process profile data if available\n    let profileSummary = null;\n    if (profileResponse?.profile && config?.enableProfile) {\n      // Convert Profile to EnhancedProfile format\n      const enhancedProfile = {\n        nodes: profileResponse.profile.nodes || [],\n        samples: profileResponse.profile.samples || [],\n        startTime: profileResponse.profile.startTime || 0,\n        endTime: profileResponse.profile.endTime || 0\n      };\n      profileSummary = generateProfileSummary(enhancedProfile, performance.loadTime);\n    }\n\n    // Generate report\n    const report: WebVitalsReport = {\n      scenario: scenario.name,\n      url: scenario.url,\n      timestamp: new Date().toISOString(),\n      metrics: webVitals,\n      performance,\n      network,\n      profile: profileSummary ? {\n        summary: profileSummary,\n        rawData: profileResponse?.profile || null\n      } : null,\n    };\n    \n    // Clean up CDP session\n    if (cdpSession) {\n      try {\n        await cdpSession.detach();\n      } catch (error) {\n        console.warn('âš ï¸  Error detaching CDP session:', error);\n      }\n    }\n    \n    return report;\n    \n  } finally {\n    await page.close();\n  }\n}\n","import type { WebVitalsReport, GuardianConfig } from '../types';\n\n/**\n * Checks if Web Vitals metrics violate performance budgets\n * @param report - Web Vitals report to check\n * @param budgets - Performance budgets to validate against\n * @returns Array of budget violation messages\n */\nexport function checkBudgetViolations(report: WebVitalsReport, budgets: GuardianConfig['budgets']): string[] {\n  const violations: string[] = [];\n  \n  if (!budgets) return violations;\n  \n  const { metrics } = report;\n  \n  if (budgets.FCP && metrics.FCP && metrics.FCP > budgets.FCP) {\n    violations.push(`FCP: ${metrics.FCP}ms > ${budgets.FCP}ms`);\n  }\n  \n  if (budgets.LCP && metrics.LCP && metrics.LCP > budgets.LCP) {\n    violations.push(`LCP: ${metrics.LCP}ms > ${budgets.LCP}ms`);\n  }\n  \n  if (budgets.FID && metrics.FID && metrics.FID > budgets.FID) {\n    violations.push(`FID: ${metrics.FID}ms > ${budgets.FID}ms`);\n  }\n  \n  if (budgets.CLS && metrics.CLS && metrics.CLS > budgets.CLS) {\n    violations.push(`CLS: ${metrics.CLS} > ${budgets.CLS}`);\n  }\n  \n  if (budgets.INP && metrics.INP && metrics.INP > budgets.INP) {\n    violations.push(`INP: ${metrics.INP}ms > ${budgets.INP}ms`);\n  }\n  \n  if (budgets.TTFB && metrics.TTFB && metrics.TTFB > budgets.TTFB) {\n    violations.push(`TTFB: ${metrics.TTFB}ms > ${budgets.TTFB}ms`);\n  }\n  \n  return violations;\n}\n","import { chromium } from 'playwright';\nimport type { GuardianConfig, GuardianResult } from '../types';\nimport { findScenarioFiles, loadScenarioFile } from '../utils/fileUtils';\nimport { runScenario } from '../scenarios/runner';\nimport { checkBudgetViolations } from './budgetChecker';\nimport { generateHTMLReport } from '../utils/reportGenerator';\n\n/**\n * Main function that runs all scenarios and generates Web Vitals reports\n * @param config - Guardian configuration\n * @returns Promise resolving to execution results and summary\n */\nexport async function runWebVitalsGuardian(config: GuardianConfig): Promise<GuardianResult> {\n  const browser = await chromium.launch({ \n    headless: config.headless !== false \n  });\n  \n  try {\n    // Find all scenario files\n    const scenarioFiles = findScenarioFiles(config.scenariosPath);\n    \n    if (scenarioFiles.length === 0) {\n      throw new Error(`No *.scenario.json files found in ${config.scenariosPath}`);\n    }\n    \n    console.log(`Found ${scenarioFiles.length} scenario files`);\n    \n    const reports: GuardianResult['reports'] = [];\n    const budgetViolations: string[] = [];\n    \n    // Run each scenario\n    for (const filePath of scenarioFiles) {\n      try {\n        console.log(`Running scenario: ${filePath}`);\n        const scenario = loadScenarioFile(filePath, config.variables);\n        const report = await runScenario(browser, scenario, config);\n        reports.push(report);\n        \n        // Check against budgets\n        const budgets = { ...config.budgets, ...scenario.webVitals?.budgets };\n        const violations = checkBudgetViolations(report, budgets);\n        if (violations.length > 0) {\n          budgetViolations.push(`${scenario.name}: ${violations.join(', ')}`);\n        }\n        \n        console.log(`âœ“ Completed: ${scenario.name}`);\n      } catch (error) {\n        console.error(`âœ— Failed to run scenario ${filePath}:`, error);\n        // Continue with other scenarios\n      }\n    }\n    \n    const summary: GuardianResult['summary'] = {\n      totalScenarios: scenarioFiles.length,\n      passed: reports.length,\n      failed: scenarioFiles.length - reports.length,\n      budgetViolations\n    };\n    \n    const result = { reports, summary };\n    \n    // Generate HTML report if requested\n    if (config.generateHTMLReport) {\n      const htmlReportPath = config.htmlReportPath || \n        (config.outputPath ? `${config.outputPath}/web-vitals-report.html` : 'web-vitals-report.html');\n      generateHTMLReport(result, htmlReportPath);\n    }\n    \n    return result;\n    \n  } finally {\n    await browser.close();\n  }\n}\n"],"names":["metric","value","initScript","results","performance"],"mappings":"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A,SAAS,SAAiB;AACtB,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyrDX;AAKA,SAAS,gBAAwB;AAC7B,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;A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"}